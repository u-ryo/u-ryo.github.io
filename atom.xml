<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><title><![CDATA[u-ryo's blog]]></title><link href="http://u-ryo.github.io//atom.xml" rel="self"/><link href="http://u-ryo.github.io//"/><updated>2023-09-10T17:20:45+09:00</updated><id>http://u-ryo.github.io//</id><author><name><![CDATA[u-ryo]]></name></author><generator uri="http://sysgears.com/grain/">Grain</generator><entry><title type="html"><![CDATA[Get Refresh Token for Google API]]></title><link href="http://u-ryo.github.io//blog/2023/09/10/get-refresh-token-for-google-api/"/><updated>2023-09-10T15:03:23+09:00</updated><id>/blog/2023/09/10/get-refresh-token-for-google-api/</id><content type="html"><![CDATA[]]></content></entry><entry><title type="html"><![CDATA[Get Refresh Token for Google API]]></title><link href="http://u-ryo.github.io//blog/2023/09/10/get-refresh-token-for-google-api/"/><updated>2023-09-10T17:20:45+09:00</updated><id>/blog/2023/09/10/get-refresh-token-for-google-api/</id><content type="html"><![CDATA[<p>ä½•ã‹ã„ã¤ã®é–“ã«ã‹Google APIã®èªè¨¼æ–¹æ³•ãŒå¤‰ã‚ã£ã¦ã¦ã€securityä¸Šã®ç†ç”±ã‹ã‚‰ã¨ã„ã†ã®ã§ä»•æ–¹ãªã„ã‚“ã§ã—ã‚‡ã†ã‘ã©ã€‚
<code>AUTHORIZATION_CODE</code>ã‚’å¾—ã‚ˆã†ã¨ã€ä»¥å‰ã®ã‚ˆã†ã«â†“ã®URLã«accessã™ã‚‹ã¨ã€
https://accounts.google.com/o/oauth2/v2/auth?response<em>type=code&amp;client</em>id=...apps.googleusercontent.com&amp;redirect<em>uri=urn:ietf:wg:oauth:2.0:oob&amp;scope=https://www.googleapis.com/auth/photoslibrary&amp;access</em>type=offline
<code>ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ–ãƒ­ãƒƒã‚¯: ... ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ç„¡åŠ¹ã§ã™</code>
ã¨å‡ºã¦ã€ã‚ã‚Œ?!ã¨ã€‚</p>
<blockquote><p>ã‚¨ãƒ©ãƒ¼ 400: invalid_request
The out-of-band (OOB) flow has been blocked in order to keep users secure. Follow the Out-of-Band (OOB) flow migration guide linked in the developer docs below to migrate your app to an alternative method.
ã§ã€<a href="https://developers.google.com/identity/protocols/oauth2/resources/oob-migration?hl=ja">å¸¯åŸŸå¤–ï¼ˆOOBï¼‰ãƒ•ãƒ­ãƒ¼ç§»è¡Œã‚¬ã‚¤ãƒ‰</a>ã¸èª˜å°ã•ã‚Œã€‚
ã“ã®oobãƒ•ãƒ­ãƒ¼ã¯ãªããªã£ãŸã¨!? ã‚“ã˜ã‚ƒã©ã†ã›ãƒã£ã¦ã„ã†ã‚“ã˜ã‚ƒã­ã‚“ã€‚
ã€Œãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ã«ç›¸å½“ã™ã‚‹ã‹ã‚‰ã€<a href="https://developers.google.com/identity/protocols/oauth2/native-app?hl=ja#redirect-uri_loopback">ãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆlocalhost ã¾ãŸã¯ 127.0.0.1ï¼‰ãƒ•ãƒ­ãƒ¼</a>ã«é£›ã°ã•ã‚ŒãŸã‚‚ã®ã®ã€ã“ã£ã¡ã‚‚ãªããªã£ã¦ã¦ã€<a href="https://developers.google.com/identity/protocols/oauth2/resources/loopback-migration?hl=ja">ãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ•ãƒ­ãƒ¼ã®ç§»è¡Œã‚¬ã‚¤ãƒ‰</a>ã«é£›ã°ã•ã‚Œã¦ã€çµå±€libraryä½¿ã†æ–¹æ³•ã—ã‹æ›¸ã„ã¦ãªãã¦ã€‚ã“ã¡ã¨ã‚‰ã€shell scriptã§ä½¿ã„ãŸã„ã‚“ã§ã™ã‘ã©ã€‚<code>refresh_token</code>æ¬²ã—ã„ã ã‘ãªã®ã«ã€ãªã‚“ã§ã“ã‚“ãªã«è‹¦åŠ´ã›ãªã‹ã‚“ã®??ğŸ¤”
...ã£ã¦å˜†ã„ã¦ã‚‚ä»•æ–¹ãªã„ã®ã§ã€libraryä½¿ã£ã¦<code>refresh_token</code>å–å¾—ã ã‘ã—ã¾ã™ã€‚
ã¡ã‚‡ã£ã¨ã‚ã‚“ã©ãã•ã„ã‚“ã§ã™ã‘ã©ã€localç’°å¢ƒã‚’æ±šæŸ“ã—ãªã„å½¢ã§ã€‚
å‚è€ƒ:
- <a href="https://qiita.com/sey323/items/4c7140efaed750e690eb">Pythonã‹ã‚‰GooglePhotoã«ç”»åƒã‚„å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</a>
- <a href="https://qiita.com/sey323/items/875c0ab1585044772ab2#%E8%AA%8D%E8%A8%BC%E6%83%85%E5%A0%B1%E3%81%AE%E4%BD%9C%E6%88%90">Pythonã‹ã‚‰GoogleDriveã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</a></p>
</blockquote>
<p>Google APIã®<a href="https://console.cloud.google.com/apis/credentials">èªè¨¼æƒ…å ±ã®page</a>ã‹ã‚‰ã€ŒOAuthã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ã—ã¦<code>client_secret.json</code>ã¨ã—ã¦ä¿å­˜ã€‚
``<code>
ã“ã“ã§</code>w3m<code>ãŒé–‹ãã®ã§ã€</code>Q<code>ã‚’æŠ¼ã—ã¦é–‰ã˜ã‚‹ã¨URLãŒè¡¨ç¤ºã•ã‚Œã€ãã“ã‚’Chromeãªã‚Šã§é–‹ã„ã¦ã€çªãé€²ã‚“ã§æ‰¿èªã—ã¾ã™ã€‚
ãã†ã™ã‚‹ã¨ã€http://localhost:8080/?state=.... ã¸å›ã•ã‚Œã¦æ­¢ã¾ã‚‹ã®ã§ã€</code>C-a<code>ã§åˆ¥screenã‚’é–‹ã„ã¦ã€ãã“ã§</code>w3m 'http://localhost:8080/?state=...'<code>ã¨ã™ã‚‹ã¨ã€</code>The authentication flow has completed. You may close this window.<code>ã¨è¨€ã‚ã‚Œã¾ã™ã€‚å¾ã«å…ƒã®screenã«æˆ»ã‚‹ã¨</code>credential<code>objectãŒã§ãã¦ã„ã‚‹ã®ã§ã€</code>credential.refresh<em>token<code>ã¨ã™ã‚‹ã¨ã€æ¼¸ã</code>REFRESH</em>TOKEN<code>ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚1æ™‚é–“æœ‰åŠ¹ãª</code>ACCESS_TOKEN<code>ã¯</code>credentail.token`ã§å¾—ã‚‰ã‚Œã¾ã™ã€‚
ã“ã‚Œã‚‰ã‚’ä½¿ã†ã¨ã€ã‚„ã£ã¨ä»¥å‰ã®ã‚ˆã†ã«shell scriptã§å›ã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãµã…ã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[gradlew stopped]]></title><link href="http://u-ryo.github.io//blog/2021/07/11/gradlew-stopped/"/><updated>2021-07-11T01:12:30+09:00</updated><id>/blog/2021/07/11/gradlew-stopped/</id><content type="html"><![CDATA[<p>å®Ÿã«ä¹…ã—æŒ¯ã‚Šã«ã“ã®blogã‚’æ›¸ã“ã†ã¨ã—ã¦ã€</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>./grainw create-post &#39;some title&#39;
</span></code></pre></td></tr></table></div></figure>
<p>ã¨ã—ãŸã‚‰ã€<code>gradle-1.8.jar</code>ã‚’å–ã‚Šã«è¡Œã£ã¦404 not foundé£Ÿã‚‰ã£ã¦å‹•ãã¾ã›ã‚“ã€‚
ã“ã®<a href="https://github.com/sysgears/grain">grain</a>ã£ã¦å¤ã„ã—ã‚‚ã†æ›´æ–°æ­¢ã¾ã£ã¦ã‚‹ã—ã€å…ˆè¦‹ã®æ˜ãªã‹ã£ãŸãªãã¨ã„ã†ã“ã¨ãªã‚“ã§ã™ãŒã€ã‚‚ã†ã¡ã‚‡ã£ã¨æœ¬æ°—ã§åŸå› ç©¶æ˜ã§ã™ã€‚
https://services.gradle.org/distributions/ ã¯ã‚ã‚‹ã®ã«ãªãœ404? ã¨æ€ã£ãŸã‚‰ã€<code>http://...</code>ã§å–ã‚Šã«è¡Œã£ã¦ã¾ã—ãŸã€‚gradlewã®gradleãŒå¤ã™ãã‚‹?
<code>grainw</code>ã®ã©ã“ã§æ­¢ã¾ã£ã¦ã‚‹ã‹ã€debug printå…¥ã‚Œã¦å‰²ã‚Šå‡ºã™ã¨ã€<code>./gradlew gendeps</code>ã§ã—ãŸã€‚ã“ã‚Œã‚’version 6.8.1ã®gradleã§æ‰‹å‹•ã§ã‚„ã£ã¦ã¿ã‚‹(<code>gradle gendeps</code>)ã¨ã€<code>build.gradle</code>ã®<code>line: 78</code>ã§æ­¢ã¾ã‚Šã¾ã™ã€‚ãªã‚“ã§?ã¨æ€ã£ã¦èª¿ã¹ã‚‹ã¨ã€<a href="https://qiita.com/Yu-s/items/13a6a8db8dc191bb3b42">ã€ŒCannot add task 'wrapper' as a task with that name already exists.ã€ãŒå‡ºãŸ</a>ã«ã‚ã£ãŸé€šã‚Šã€ã§ã—ãŸã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>task wrapper(type: Wrapper) {
</span></code></pre></td></tr></table></div></figure>
<p>ã‚’</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>wrapper {
</span></code></pre></td></tr></table></div></figure>
<p>ã«ã™ã‚Œã°å‹•ãã¾ã—ãŸã€‚è‰¯ã‹ã£ãŸã€‚
<code>gradle wrapper</code>ã§<code>./gradlew</code>ã‚’æ›´æ–°ã—ã¦ã€<code>./grainw</code>ã‚‚å¾©æ´»ã—ã¾ã—ãŸã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[ansible for docker]]></title><link href="http://u-ryo.github.io//blog/2021/07/11/ansible-for-docker/"/><updated>2021-07-11T15:40:40+09:00</updated><id>/blog/2021/07/11/ansible-for-docker/</id><content type="html"><![CDATA[<p>ansibleã®localã§ã®é–‹ç™ºç’°å¢ƒã¨ã„ãˆã°vagrant+virtualboxã§ã™ãŒã€dockerã§ã„ã„ã‚“ã˜ã‚ƒã­ã‡ã®?ã¨æ€ã£ã¦è‰²ã€…è©¦è¡ŒéŒ¯èª¤ã—ã¦ã¿ã¾ã—ãŸã€‚ä½•åº¦ã‚‚æŒ«ã‘ã¦ã€ã‚‚ã†é§„ç›®ã‹ã¨æ€ã„ã¾ã—ãŸã‘ã©ã€å¹¾ã¤ã‚‚ã®å±±ã‚’è¶Šãˆã€ã¤ã„ã«å‡ºæ¥ã¾ã—ãŸã§ã™ã‚ˆ!</p>
<figure class='code'><figcaption><span>docker.ini</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="p-Indicator">[</span><span class="nv">docker_host</span><span class="p-Indicator">]</span>
</span><span class='line'><span class="l-Scalar-Plain">localhost</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">[container]</span>
</span><span class='line'><span class="l-Scalar-Plain">eiger-local</span>
</span></code></pre></td></tr></table></div></figure>
<figure class='code'><figcaption><span>playbooks/docker.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hosts</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">localhost</span>
</span><span class='line'>  <span class="l-Scalar-Plain">connection</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">local</span>
</span><span class='line'>  <span class="l-Scalar-Plain">gather_facts</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">no</span>
</span><span class='line'>  <span class="l-Scalar-Plain">vars</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">ansible_python_interpreter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/Users/ryo-umetsu/.anyenv/envs/pyenv/shims/python</span>
</span><span class='line'>    <span class="c1"># ansible_python_interpreter: /usr/bin/python3</span>
</span><span class='line'>  <span class="l-Scalar-Plain">tasks</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">deploy amazonlinux docker</span>
</span><span class='line'>      <span class="l-Scalar-Plain">docker_container</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">amazonlinux</span>
</span><span class='line'>        <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">eiger-local</span>
</span><span class='line'>        <span class="l-Scalar-Plain">volumes</span><span class="p-Indicator">:</span>
</span><span class='line'>          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">/sys/fs/cgroup:/sys/fs/cgroup:ro</span>
</span><span class='line'>        <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">57017:27017</span>
</span><span class='line'>        <span class="l-Scalar-Plain">expose</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">57017</span>
</span><span class='line'>        <span class="l-Scalar-Plain">tty</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">yes</span>
</span><span class='line'>        <span class="l-Scalar-Plain">detach</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">yes</span>
</span><span class='line'>        <span class="l-Scalar-Plain">privileged</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">yes</span>
</span><span class='line'>        <span class="c1"># capabilities:</span>
</span><span class='line'>        <span class="c1">#   - SYS_ADMIN</span>
</span><span class='line'>        <span class="c1"># sysctl:</span>
</span><span class='line'>        <span class="c1">#   vm.swappiness: 1</span>
</span><span class='line'>        <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">sh -c &#39;yum -y install procps systemd-sysv file &amp;&amp; exec /sbin/init &amp;&amp; systemctl restart&#39;</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">adding host</span>
</span><span class='line'>      <span class="l-Scalar-Plain">add_host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">name=&quot;eiger-local&quot;</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wait</span>
</span><span class='line'>      <span class="l-Scalar-Plain">wait_for</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">delay</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">10</span>
</span><span class='line'>        <span class="l-Scalar-Plain">timeout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">10</span>
</span><span class='line'>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hosts</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">eiger-local</span>
</span><span class='line'>  <span class="l-Scalar-Plain">connection</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">docker</span>
</span><span class='line'>  <span class="l-Scalar-Plain">vars</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">setup_mongodb_password</span><span class="p-Indicator">:</span> <span class="kt">!vault</span> <span class="p-Indicator">|</span>
</span><span class='line'>      <span class="no">$ANSIBLE_VAULT;1.1;AES256</span>
</span><span class='line'>          <span class="no">39356533306331333763353433363335343961653335373762623630653361623034646232633837</span>
</span><span class='line'>          <span class="no">6164306666656436653636643333363261646662356666640a636462346635323164633365376637</span>
</span><span class='line'>          <span class="no">39303832396638336664653439326536386235323262303733653563653766353263623032386538</span>
</span><span class='line'>          <span class="no">3135623166613363630a343734666666323830663838653962663032386337626635396563383230</span>
</span><span class='line'>          <span class="no">6266</span>
</span><span class='line'>    <span class="c1"># setup_mongodb_password: &quot;test&quot;</span>
</span><span class='line'>    <span class="l-Scalar-Plain">ansible_python_interpreter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/usr/bin/python</span>
</span><span class='line'>  <span class="l-Scalar-Plain">roles</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">role</span><span class="p-Indicator">:</span> <span class="s">&quot;../roles/create_data_directory&quot;</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">role</span><span class="p-Indicator">:</span> <span class="s">&quot;../roles/setup_mongodb&quot;</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">role</span><span class="p-Indicator">:</span> <span class="s">&quot;../roles/configure_logrotate&quot;</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">role</span><span class="p-Indicator">:</span> <span class="s">&quot;../roles/configure_swap&quot;</span>
</span></code></pre></td></tr></table></div></figure>
<p>å‡„ã„know-howè©°ã¾ã£ã¦ã¾ã™ã€‚</p>
<ul>
<li><code>connection: local</code>ã¨ã™ã‚‹ã¨<code>ssh</code>çµŒç”±ã˜ã‚ƒãªãç›´æ¥commandå©ã„ã¦ãã‚Œã‚‹</li>
<li><code>connection: docker</code>ã¨ã™ã‚‹ã¨<code>docker exec</code>ã§å©ã„ã¦ãã‚Œã‚‹(ã®ã§targetã«<code>authorized_keys</code>ã¨ã‹<code>sshd</code>ã¨ã‹ä¸è¦)</li>
<li><code>localhost</code>ã§ã¯<code>gather_facts: no</code>ã¨ã™ã‚‹(ã“ã‚Œã‚’ã—ãªã„ã¨<code>ansible_swaptotal_mb</code>ã¨ã‹<code>ansible_memtotal_mb</code>ã¨ã„ã£ãŸ<a href="https://docs.ansible.com/ansible/2.9_ja/user_guide/playbooks_variables.html#fact">ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰æ¤œå‡ºã•ã‚Œã‚‹å¤‰æ•°: Fact (ãƒ•ã‚¡ã‚¯ãƒˆ)</a>ãŒåŸ‹ã‚ã‚‰ã‚Œãªã„)</li>
<li><code>ansible_python_interpreter: /usr/bin/python3</code>ã¯<code>python</code> binaryã‚’æ¢ã™é †åºãŒã‚ã£ã¦ã€<code>/usr/bin/python</code>ã‚’å…ˆã«è¦‹ã¤ã‘ã¦ã—ã¾ã„ã€version 2ã‚’ä½¿ã£ã¦ã—ã¾ã†ã®ã‚’é˜²ããŸã‚ã€‚Macã ã¨<code>/usr/bin/python</code>ãŒpython2ã§ã€python3ã¯<code>/usr/bin/python3</code>ãªã®ã§ã€‚ã“ã“ã®versionãŒåˆã‚ãªã„ã¨ã€<code>The error was: No module named 'requests'"</code>ã¨è¨€ã‚ã‚Œã¦ä½•ãŒæ‚ªã„ã®ã‹ã•ã£ã±ã‚Šã ã£ãŸã€‚åŸºæœ¬çš„ã«ã¯<code>pip3 install docker</code>ãŒè¶³ã‚Šãªã‹ã£ãŸã®ã ãŒã€ãã®ä»–ã«ã€ã“ã®ã‚ˆã†ã«ansibleãŒè‡ªåˆ†ã§è¦‹ã¤ã‘ã¦ä½¿ã£ã¦ã„ã‚‹pythonã®versionã¨è‡ªåˆ†ãŒcommand lineã§ä½¿ã£ã¦ã„ã¦<code>pip install</code>ã—ãŸpythonã®versionãŒãšã‚Œã¦ã„ã‚‹ã¨ã€ã“ã®ã‚ˆã†ã«è¨€ã‚ã‚Œã‚‹ã€ã“ã¨ãŒã‚ã‹ã£ãŸã€‚ãã®ä»–ã«ã‚‚inventoryã§æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚command line optionã§æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã€‚command line optionã§<code>-e ansible_python_interpreter=/usr/bin/python3</code>ã¨ã™ã‚‹ã®ãŒæœ€ã‚‚æŸ”è»Ÿã ãŒã€ã“ã‚Œã¯playbooksä¸­ã®å€¤ã‚’å…¨ã¦ä¸Šæ›¸ãã™ã‚‹ã®ã§ã€ã‚„ã¯ã‚Šæ³¨æ„ãŒå¿…è¦ã ã£ãŸã€‚pythonã£ã¦versionã‚„ã‚„ã“ã—ãã¦...</li>
<li><code>setup_mongodb_password: !vault |</code>ã¯<a href="https://docs.ansible.com/ansible/2.9/user_guide/playbooks_vault.html#single-encrypted-variable">Single Encrypted Variable</a>ã§<code>echo -n test|ansible-vault encrypt_string --vault-password-file vault_password.txt --encrypt-vault-id default --stdin setup_mongodb_password</code>ã®ã‚ˆã†ã«ä½¿ã†(<a href="https://qiita.com/park-jh/items/91bf48848e366c79a61b#variable%E3%82%921%E9%A0%85%E7%9B%AE%E3%81%A0%E3%81%91%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%99%E3%82%8B">ansible-vaultã§æš—å·åŒ–ã—ã‚ˆã†ã€‚</a>)</li>
<li><code>docker_container:</code>ã¯moduleåã§ã€å¤ã„æ–‡çŒ®ã ã¨<code>docker:</code>ã«ãªã£ã¦ã„ã¦ä»Šã¯åŠ¹ã‹ãªã„ã®ã§æ³¨æ„ã€‚ä¸­ã§æŒ‡å®šã§ãã‚‹ã‚‚ã®ã¯<a href="https://docs.ansible.com/ansible/latest/collections/community/docker/docker_container_module.html#ansible-collections-community-docker-docker-container-module">community.docker.docker_container â€“ manage docker containers</a>ã«æŒ™ãŒã£ã¦ã„ã‚‹ã€‚<code>privileged: yes</code>ã¯ã€containerå†…ã§<code>sysctl vm.swappiness=1</code>(defaultã¯60)ã‚’ã•ã‚Œã‚‹ã®ã§ã€‚<code>sysctl:</code>ã¨ã„ã†optionã‚‚ã‚ã‚‹ã®ã ã‘ã‚Œã©ã€ãã“ã§æŒ‡å®šã§ãã‚‹(whitelistã«ã‚ã‚‹)ã®ã¯<code>net.*</code>ã¨ã‹<code>kernel.*</code>ã®ä¸€éƒ¨ã ã‘ã ãã†(<a href="https://docs.docker.jp/engine/reference/commandline/run.html#currently-supprted-sysctls">ã‚µãƒãƒ¼ãƒˆä¸­ã® sysctl</a>)ã€‚</li>
<li><code>command: sh -c 'yum -y install procps systemd-sysv file &amp;&amp; exec /sbin/init'</code>ã¯ã€playbookä¸­ã§<code>systemctl</code>ã‚’è¨­å®šã™ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã‹ã‚‰ã€‚<code>Restart=always</code>ã«ã—ãŸã„ã‚“ã§ã™ã‚ˆã­è¦ã™ã‚‹ã«ã€‚ã§ã‚‚ã€ãã†ã™ã‚‹ã¨dockerã«<code>systemd</code>(<code>initd</code>)ãŒå‹•ã„ã¦ã„ã­ã°ãªã‚‰ãšã€ãã†ã„ãˆã°dockerã£ã¦æ™®é€šã¯ãã‚“ãªã®ãªã‹ã£ãŸãªã€ã©ã†ã‚„ã‚‹ã‚“ã ? <a href="https://qiita.com/mach3/items/33f2b234babe679c759f">èª¿ã¹ã‚‹</a>ã¨ã€</li>
<li><code>systemd-sysv</code>ã‚’installã™ã‚‹å¿…è¦</li>
<li><code>/sys/fs/cgroup:/sys/fs/cgroup:ro</code>ã®device mountãŒå¿…è¦<ul>
<li>macã«ã¯ãã‚“ãªdirectoryã¯ãªã„ã®ã«å¤§ä¸ˆå¤«ãªã®ãŒä¸æ€è­°</li>
</ul>
</li>
<li>æœ€å¾Œã¯<code>/sbin/init</code></li>
<li>â†‘ã“ã‚Œã§ã¯containerãŒæ•°ç§’ã§å€’ã‚Œã‚‹ã®ã§æ›´ã«èª¿ã¹ã‚‹ã¨<code>exec /sbin/init</code>(ã“ã‚Œã©ã“ã§è¦‹ãŸã‚“ã ã£ã‘ãªãæ„Ÿå‹•ã—ãŸãªãStackOverflowã ã£ãŸæ°—ãŒã€‚ä»–ã§ã¯å…¨ç„¶æ›¸ã„ã¦ç„¡ãã¦ã€ã‚ˆãè¦‹ã¤ã‘ãŸã‚‚ã‚“ã )</li>
<li><code>wait_for:</code>ãŒãªã„ã¨ã€dockerå†…ã«ã¾ã <code>yum install</code>ã¨ã‹çµ‚ã‚ã‚Šãã£ã¦ãªã„ã®ã«ã©ã‚“ã©ã‚“æ¬¡ã«é€²ã‚“ã§ã—ã¾ã„ã€<code>service.name:mongod,service.enabled:true</code>ã®æ™‚ã«ã€Œ<code>mongod</code>ã¨ã„ã†serviceã¯ãªã„ã€ã¨ã„ã£ã¦è½ã¡ã¦ã—ã¾ã†ã®ã§ã€‚ãƒ›ãƒ³ãƒˆã¯ã¡ã‚ƒã‚“ã¨ä½•ã‹ã‚’å¾…ã¡ãŸã‹ã£ãŸã‚“ã ã‘ã©ã€ä½•ã‚’å¾…ã£ãŸã‚‰ã„ã„ã®ã‹ä¸æ˜ã§ã—ãŸã€‚processã‹ãªã¨æ€ã£ãŸã‚“ã§ã™ãŒã€processã®waitã£ã¦<a href="https://www.middlewareinventory.com/blog/ansible-wait_for-examples/">pid fileã®å­˜åœ¨æœ‰ç„¡ã‚’ç¢ºèªã™ã‚‹</a>ã¿ãŸã„ãªã€‚ã„ã‚ƒãƒ¼ã€<code>systemd</code>ã¨ã„ã†ã‹<code>init</code>ã£ã¦pid fileãªã‚“ã¦ãªã„ã‚“ã§ã™ã‘ã©ã€‚network portå¾…ã¤ä¾‹ã¯æ•°å¤šã‚ã‚Œã©ã€‚ä»•æ–¹ãªã„ã®ã§ãŸã 10ç§’å¾…ã¤ã‚ˆã†ã«ã€‚<code>timeout:10</code>ã¯ä¸è¦ã‹ã¨æ€ã„ãã‚„ã€ãªã„ã¨ãšã£ã¨å¾…ã£ã¦ã¾ã—ãŸã€‚</li>
<li>ã“ã‚Œã‚’<code>ansible-playbook -vvv -i docker.ini playbooks/docker.yml</code>ã¨å®Ÿè¡Œã™ã‚‹ã‚“ã§ã™ãŒã€dockerã§ã‚„ã‚‹å ´åˆã¯<code>ansible/ansible-runner</code>ä½¿ã£ã¦ã€<code>docker run --rm --name=ansible -v $PWD:/work -w /work -v /var/run/docker.sock:/var/run/docker.sock ansible/ansible-runner sh -c 'pip3 install docker&amp;yum install -y yum-utils;yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo;yum install -y docker-ce docker-ce-cli containerd.io;ansible-playbook -i docker.ini playbooks/docker.yml'</code>ã¨ã€CentOS8 baseã®ansible-runnerã«dockerã‚’å…¥ã‚Œã­ã°ãªã‚‰ãšã€ã¾ãŸunix socketã‚’å…±æœ‰ã—ãªã„ã¨ãªã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚CentOS8ã«<code>yum install docker</code>ã™ã‚‹ã¨podmanãŒå…¥ã‚Šã‚„ãŒã‚‹ã‚“ã§ã™ã‚ˆã­ã€‚podmanã£ã¦Macã˜ã‚ƒå‹•ã‹ã­ã‡ã£ã¤ãƒ¼ã®! podmanã ã¨<code>hosts:eiger-local</code>ã®<code>gather_facts</code>ã§Docker version checkã«å¤±æ•—ã—ã¦è½ã¡ã‚‹ã‚“ã§ã™ã‚ˆã­ã€‚<a href="https://discussion.fedoraproject.org/t/podman-broken-on-silverblue-podman-complains-kernel-not-supporting-overlay-fs-backing-file-system-is-unsupported-for-this-graph-driver/25403/2">Podman broken on Silverblue? Podman complains kernel not supporting overlay fs (backing file system is unsupported for this graph driver)</a>è¦‹ã¦<code>sed -i "s/#mount_program/mount_program/" /etc/containers/storage.conf</code>åŠ ãˆã¦ã‚‚ã€<code>Error: mount /var/lib/containers/storage/overlay:/var/lib/containers/storage/overlay, flags: 0x1000: operation not permitted</code>ã€‚ã†ãƒ¼ã‚“ã€‚é€†ã«ã€docker containerã«ansibleã‚’å…¥ã‚Œã‚‹æ–¹ãŒsimpleã§ã—ãŸã€‚å³ã¡ã€<code>docker run --rm --name=ansible -v $PWD:/work -w /work -v /var/run/docker.sock:/var/run/docker.sock docker sh -c 'apk add ansible py3-pip;pip3 install docker;ansible-playbook -i docker.ini playbooks/docker.yml'</code>ã§ã™ã­ã€‚</li>
</ul>
<h2>å‚è€ƒã‚µã‚¤ãƒˆ</h2>
<ul>
<li><a href="https://techblog.gmo-ap.jp/2016/09/23/docker%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%92ansible%E3%81%A7%E3%83%97%E3%83%AD%E3%83%93%E3%82%B8%E3%83%A7%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%97%E3%81%9F/">ansibleã‚’ä½¿ã£ã¦Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã—ãŸãŠè©±</a></li>
<li><a href="https://qiita.com/gosarami/items/e1600292aa260444d3df">ansible-playbookã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã—ã¦ã¿ãŸ</a></li>
<li><a href="https://inamuu.com/ansible%E3%81%A7docker%E3%81%B8%E3%83%97%E3%83%AD%E3%83%93%E3%82%B8%E3%83%A7%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%99%E3%82%8B/">Ansibleã§dockerã¸ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã™ã‚‹</a></li>
<li><a href="https://techblog.gmo-ap.jp/wp-content/uploads/2016/09/77a5ba13cea567e2af8323cbfa5a2286.pdf">ansibleã‚’ä½¿ã£ã¦Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã™ã‚‹</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/collections/community/docker/docker_container_module.html#ansible-collections-community-docker-docker-container-module">community.docker.docker_container â€“ manage docker containers</a></li>
<li><a href="https://rheb.hatenablog.com/entry/ansible_interpreter_discovery">Ansible2.8ã®æ–°æ©Ÿèƒ½1 - Interpreter Discovery</a></li>
<li><a href="https://qiita.com/muddydixon/items/d2982ab0846002bf3ea8">Docker privileged ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦</a></li>
<li><a href="https://qiita.com/osamunmun/items/1786aac5904439522d72">Dockerã‚³ãƒ³ãƒ†ãƒŠä¸Šã§sysctlã§ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="https://docs.docker.jp/engine/reference/commandline/run.html#currently-supprted-sysctls">ã‚µãƒãƒ¼ãƒˆä¸­ã® sysctl</a></li>
<li><a href="https://qiita.com/ma2shita/items/f1a68a3f909c5cee7869">Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã®net.core.somaxconnã‚’ã„ã˜ã‚‹æ–¹æ³•</a></li>
<li><a href="https://blog.ymyzk.com/2017/01/docker-compose-sysctls/">Docker Compose ã§ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹</a></li>
<li><a href="https://moznion.hatenadiary.com/entry/2018/09/01/224626">Linux Kernel 4.12ä»¥å‰ã§ã‚ã‚Œã°hostãƒã‚·ãƒ³ã®sysctlã®å€¤ãŒDocker containerç’°å¢ƒã«å¼•ãç¶™ãŒã‚Œã‚‹ã‹ã©ã†ã‹æ¤œè¨¼ã—ãŸ</a></li>
<li><a href="https://qiita.com/hiroyuki_onodera/items/398c1331b157e5b4b588">Ansible: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã§python3ã‚’ä½¿ç”¨ã™ã‚‹ansible.cfgè¨­å®šã¯ã€ansible<em>python</em>interpreterã§ã¯ç„¡ãinterpreter_python</a></li>
<li><a href="https://kamatama41.hatenablog.com/entry/2019/06/17/001009">Dockerã®Ubuntuã‚³ãƒ³ãƒ†ãƒŠã§systemdã‚’å‹•ã‹ã™</a></li>
<li><a href="https://qiita.com/mach3/items/33f2b234babe679c759f">Docker amazonlinux2 ã§ systemctl ã‚’ä½¿ã„ãŸã„äººç”Ÿã ã£ãŸ</a></li>
<li><a href="https://qiita.com/kawanet/items/d856b7b9eb8ceccac4d7">Docker for Macã§Amazon Linux 2ã§systemd</a></li>
<li><a href="https://www.middlewareinventory.com/blog/ansible-wait_for-examples/">Ansible wait_for module examples</a></li>
</ul>
]]></content></entry><entry><title type="html"><![CDATA[google photo api]]></title><link href="http://u-ryo.github.io//blog/2019/06/02/google-photo-api/"/><updated>2020-01-11T00:58:08+09:00</updated><id>/blog/2019/06/02/google-photo-api/</id><content type="html"><![CDATA[<p>ä¸€æ—¥åƒæšã¨ã‹å†™çœŸæ’®ã‚‹äººã ã¨å†™çœŸãŒã™ãæºœã¾ã£ã¡ã‚ƒã†ã‚“ã§ã™ã‚ˆã­ã€‚
backupã¯ç„¡é™ã®<a href="https://photos.google.com">Google Photos</a>ã«ã€ã¨ã„ã†ã“ã¨ã§ã€å‰ã¯Picasaã®APIã€<code>upload_gphots</code>ã‚’ä½¿ã£ã¦ãŸã‚“ã§ã™ã‘ã©ã€ã‚‚ã†ç„¡ããªã£ã¡ã‚ƒã£ã¦ã„ã¦ã€‚ã©ã†ã—ã‚ˆã†ã€é€”æ–¹ã«æš®ã‚Œã¦ã„ã¾ã—ãŸã€‚æš«ãã¶ã‚Šã«æ¢ã™ã¨ã€ä¸åº¦1å¹´ç¨‹å‰ã‹ã‚‰Google Photo APIãŒæ•´å‚™ã•ã‚ŒãŸã‚ˆã†ã§ã€è‰¯ã‹ã£ãŸã§ã™ã€‚ãšã£ã¨å¾…ã£ã¦ã„ã¾ã—ãŸã€‚
<a href="https://qiita.com/zaki-lknr/items/97c363c12ede4c1f25d2">[è¿½è¨˜ã‚ã‚Š] Google Photos APIsã§ã‚¢ãƒ«ãƒãƒ ä½œæˆã¨å†™çœŸã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</a>ã¨<a href="https://qiita.com/wo_k_harada/items/7327971a2414040e5a86">Google Photoã‚’æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦ä½¿ã£ãŸçµæœ</a>ã€<a href="https://developers.google.com/photos/library/guides/list">æœ¬å®¶API Document</a>ã‚’å‚è€ƒã«æ—©é€Ÿä½¿ã£ã¦ã¿ã¾ã™ã€‚</p>
<h2>ACCESS_TOKENã®å–å¾—</h2>
<ul>
<li><a href="https://developers.google.com/photos/library/guides/get-started">APIã®æœ‰åŠ¹åŒ–</a></li>
<li><a href="https://console.developers.google.com/">Google Developer Console</a>ã‹ã‚‰ã€Œèªè¨¼æƒ…å ±ã€â†’ã€ŒOAuth2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã€ç„¡ã‘ã‚Œã°ä¸Šã®ã€Œèªè¨¼æƒ…å ±ã‚’ä½œæˆã€pulldown menuã‹ã‚‰ã€ŒOAuthã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã€(ã€Œã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡ã€ã¯ã€Œãã®ä»–ã€)ã§ä½œæˆ</li>
<li>ä¸Šè¨˜ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã€ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã€ã‚’ãƒ¡ãƒ¢</li>
<li>æ¬¡ã®URLã«<code>$CLIENT_ID</code>ã‚’å…¥ã‚Œã¦browserã§accessã€AUTHORIZATION_CODEã‚’å–å¾— (<code>https://accounts.google.com/o/oauth2/v2/auth?response_type=code&amp;client_id=$CLIENT_ID&amp;redirect_uri=urn:ietf:wg:oauth:2.0:oob&amp;scope=https://www.googleapis.com/auth/photoslibrary&amp;access_type=offline</code> (SCOPEã¯Google Photoã§ã®R/W accessã®å ´åˆã¯<code>https://www.googleapis.com/auth/photoslibrary</code>)</li>
<li>ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã€<code>ACCESS_TOKEN</code>åŠã³<code>REFRESH_TOKEN</code>ã‚’å¾—ã‚‹
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ AUTHORIZATION_CODE</span><span class="o">=</span>4/wnmGpTh__1zdrgdjmPWyetUI7C1mvsjRrA_IyZmwY7aSeYppD9X_9iB
</span><span class='line'><span class="nv">$ CLIENT_ID</span><span class="o">=</span>952391557281-s8b8ditnocfu590fi0ntsfk76rbmkm80.apps.googleusercontent.com
</span><span class='line'><span class="nv">$ CLIENT_SECRET</span><span class="o">=</span>k6XPLuryMWUtKDKmS1cYgW0r
</span><span class='line'><span class="nv">$ REDIRECT_URI</span><span class="o">=</span>urn:ietf:wg:oauth:2.0:oob
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>curl --data <span class="s2">&quot;code=$AUTHORIZATION_CODE&quot;</span> --data <span class="s2">&quot;client_id=$CLIENT_ID&quot;</span> --data <span class="s2">&quot;client_secret=$CLIENT_SECRET&quot;</span> --data <span class="s2">&quot;redirect_uri=$REDIRECT_URI&quot;</span> --data <span class="s2">&quot;grant_type=authorization_code&quot;</span> --data <span class="s2">&quot;access_type=offline&quot;</span> https://www.googleapis.com/oauth2/v4/token
</span><span class='line'><span class="o">{</span>
</span><span class='line'>  <span class="s2">&quot;access_token&quot;</span>: <span class="s2">&quot;ya29.GlsOB-ebr6NrI78UemOPHcm1-jdw0XkxD8iiSqE-Bh5xB_Sx8bhKsRhRyz7gqJy45A-HIF6s6GF0j5wz0dmNppVqEMhtUurAwfbe-xgEsR5MZFjoIY3ONOx8zd4Q&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;expires_in&quot;</span>: 3600,
</span><span class='line'>  <span class="s2">&quot;refresh_token&quot;</span>: <span class="s2">&quot;1/8LrGRLdBaFJYHlOr0rEAyZcgC9yDl2PcZZyrbqoxc7c&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;scope&quot;</span>: <span class="s2">&quot;https://www.googleapis.com/auth/photoslibrary&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;token_type&quot;</span>: <span class="s2">&quot;Bearer&quot;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></li>
<li><code>ACCESS_TOKEN</code>ã¯1æ™‚é–“ã—ã‹æœ‰åŠ¹ã§ãªã„ã®ã§ã€é©å®œ<code>REFRESH_TOKEN</code>ã‚’ä½¿ã£ã¦æ›´æ–°
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ REFRESH_TOKEN</span><span class="o">=</span>1/8LrGRLdBaFJYHlOr0rEAyZcgC9yDl2PcZZyrbqoxc7c
</span><span class='line'><span class="nv">$ CLIENT_ID</span><span class="o">=</span>952391557281-s8b8ditnocfu590fi0ntsfk76rbmkm80.apps.googleusercontent.com
</span><span class='line'><span class="nv">$ CLIENT_SECRET</span><span class="o">=</span>k6XPLuryMWUtKDKmS1cYgW0r
</span><span class='line'>
</span><span class='line'><span class="nv">$ ACCESS_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s --data <span class="s2">&quot;refresh_token=$REFRESH_TOKEN&quot;</span> --data <span class="s2">&quot;client_id=$CLIENT_ID&quot;</span> --data <span class="s2">&quot;client_secret=$CLIENT_SECRET&quot;</span> --data <span class="s2">&quot;grant_type=refresh_token&quot;</span> https://www.googleapis.com/oauth2/v4/token|jq .access_token -r<span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure></li>
</ul>
<p><code>REFRESH_TOKEN</code>ã‚’å–å¾—ã™ã‚Œã°ã€ã‚ã¨<code>CLIENT_ID</code>ã¨<code>CLIENT_SECRET</code>ãŒåˆ†ã‹ã‚Œã°<code>ACCESS_TOKEN</code>ã¯æ›´æ–°ã§ãã¾ã™ã€‚</p>
<h2>ALBUMã®ä½œæˆ</h2>
<ul>
<li>æ—¢å­˜ã®Albumã®ç¢ºèª
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -s -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> https://photoslibrary.googleapis.com/v1/albums?pageSize<span class="o">=</span>50
</span></code></pre></td></tr></table></div></figure></li>
<li>æ—¢å­˜ã®Albumã®ç¢ºèª(<code>nextPageToken</code>ãŒã‚ã‚‹å ´åˆ)
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -s -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> https://photoslibrary.googleapis.com/v1/albums?pageSize<span class="o">=</span>50&amp;pageToken<span class="o">=</span>...
</span></code></pre></td></tr></table></div></figure></li>
<li>æ–°è¦Albumã®ä½œæˆ
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ DIR</span><span class="o">=</span>20190428
</span><span class='line'><span class="nv">$ </span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{ &quot;album&quot;: { &quot;title&quot;:&quot;&#39;</span><span class="nv">$DIR</span><span class="s1">&#39;&quot; } }&#39;</span> https://photoslibrary.googleapis.com/v1/albums
</span><span class='line'><span class="o">{</span>
</span><span class='line'>  <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;ADIlBkAOcfB64a_Opnwdjgxeq6jhQv4GQ1pZQ-wse2o2hiBIofuhefmFycfTtIcLAG0inLt0FlZn&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;title&quot;</span>: <span class="s2">&quot;20190428&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;productUrl&quot;</span>: <span class="s2">&quot;https://photos.google.com/lr/album/ADIlBkAOcfB64a_Opnwdjgxeq6jhQv4GQ1pZQ-wse2o2hiBIofuhefmFycfTtIcLAG0inLt0FlZn&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;isWriteable&quot;</span>: <span class="nb">true</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></li>
</ul>
<h2>UPLOAD and adding to Album</h2>
<p>2æ®µéšã«ãªã£ã¦ã„ã¦ã€</p>
<ol>
<li>binary fileã‚’uploadã—ã¦<code>UPLOAD_TOKEN</code>ã‚’å¾—ã‚‹</li>
<li><code>UPLOAD_TOKEN</code>ã‚’å…ƒã«<code>mediaItems:batchCreate</code>ã™ã‚‹(ALBUMåã¯ã“ã“ã§æ¸¡ã™ã€‚batchå‡¦ç†ãªã®ã§è¤‡æ•°ã®<code>UPLOAD_TOKEN</code>ã‚’æ¸¡ã›ã‚‹)</li>
</ol>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">FILENAME</span><span class="o">=</span>20190428/img_0699.jpg
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s1">&#39;Content-type: application/octet-stream&#39;</span> -H <span class="s1">&#39;X-Goog-Upload-Protocol: raw&#39;</span> -H <span class="s2">&quot;X-Goog-Upload-File-Name: $FILENAME&quot;</span> --data-binary <span class="s2">&quot;@$FILENAME&quot;</span> https://photoslibrary.googleapis.com/v1/uploads
</span><span class='line'>CAIS+QIASsy4zFbu3IKGgbDXA5XshOGvHPOTLuqbqTN9MQxKRVCsxp3YHbus+qsDgA0GCjuqXdmGpv1uWFxKvf8GYa/8VJQ1S6FUcmGWgw6Hdj14QNYtBRVbXU/cdq/Jkx3ZblG5co3hnY6+yMxih26kB0vTWfWp9GwIE904y5yXEE1pm/V0bFduzA/CZvdlAU9EvWfqKnNO7c3nozWUalm5WUZHHatVQZT+H5+jD0Bq3YwMUdfC5KF048AxFa9auW1HpQGdboalYyXBCJksfzteWtU53wZ8rFnZgHwrui9uA2ptnTuDlin2m+WXU+HqaVRuKX1ou5BzalI4P0gVfWql41Af6nuvvEdMNZ39tEvK2EARUX0CUd8veDznZiWjtPcRqpJnvjDRCxaSgr/cn+JXf9k7SnD0DYVWOdM64lngcAuXxsKk6RJJOVxQBUi6XAG04dHnKxDndqjl+fcH9qWAmpXejPx8Kgn6GX7TgatiKHEG4ybvWjStWg1JPg
</span><span class='line'>
</span><span class='line'><span class="nv">$ UPLOAD_TOKEN</span><span class="o">=</span>CAIS+...
</span><span class='line'><span class="nv">$ ALBUM_ID</span><span class="o">=</span>ADIlBkAOcfB64a_Opnwdjgxeq6jhQv4GQ1pZQ-wse2o2hiBIofuhefmFycfTtIcLAG0inLt0FlZn
</span><span class='line'><span class="nv">$ </span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{ &quot;albumId&quot;: &quot;&#39;</span><span class="nv">$ALBUM_ID</span><span class="s1">&#39;&quot;, &quot;newMediaItems&quot;:[ { &quot;simpleMediaItem&quot;: { &quot;uploadToken&quot;: &quot;&#39;</span><span class="nv">$UPLOAD_TOKEN</span><span class="s1">&#39;&quot; }} ] }&#39;</span> https://photoslibrary.googleapis.com/v1/mediaItems:batchCreate
</span><span class='line'><span class="o">{</span>
</span><span class='line'>  <span class="s2">&quot;newMediaItemResults&quot;</span>: <span class="o">[</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>      <span class="s2">&quot;uploadToken&quot;</span>: <span class="s2">&quot;CAIS+...&quot;</span>,
</span><span class='line'>      <span class="s2">&quot;status&quot;</span>: <span class="o">{</span>
</span><span class='line'>        <span class="s2">&quot;message&quot;</span>: <span class="s2">&quot;OK&quot;</span>
</span><span class='line'>      <span class="o">}</span>,
</span><span class='line'>      <span class="s2">&quot;mediaItem&quot;</span>: <span class="o">{</span>
</span><span class='line'>        <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;ADIl...&quot;</span>,
</span><span class='line'>        <span class="s2">&quot;productUrl&quot;</span>: <span class="s2">&quot;https://photos.google.com/lr/album/ADIl...&quot;</span>,
</span><span class='line'>        <span class="s2">&quot;mimeType&quot;</span>: <span class="s2">&quot;image/jpeg&quot;</span>,
</span><span class='line'>        <span class="s2">&quot;mediaMetadata&quot;</span>: <span class="o">{</span>
</span><span class='line'>          <span class="s2">&quot;creationTime&quot;</span>: <span class="s2">&quot;2019-04-28T02:40:35Z&quot;</span>,
</span><span class='line'>          <span class="s2">&quot;width&quot;</span>: <span class="s2">&quot;5184&quot;</span>,
</span><span class='line'>          <span class="s2">&quot;height&quot;</span>: <span class="s2">&quot;3456&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="s2">&quot;filename&quot;</span>: <span class="s2">&quot;20190428/img_0699.jpg&quot;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">]</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
<h2>folderã¾ã‚‹ã£ã¨upload</h2>
<ul>
<li>äº‹å‰æº–å‚™
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">REFRESH_TOKEN</span><span class="o">=</span>...
</span><span class='line'><span class="nv">CLIENT_ID</span><span class="o">=</span>...
</span><span class='line'><span class="nv">CLIENT_SECRET</span><span class="o">=</span>...
</span><span class='line'><span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s --data <span class="s2">&quot;refresh_token=$REFRESH_TOKEN&quot;</span> --data <span class="s2">&quot;client_id=$CLIENT_ID&quot;</span> --data <span class="s2">&quot;client_secret=$CLIENT_SECRET&quot;</span> --data <span class="s2">&quot;grant_type=refresh_token&quot;</span> https://www.googleapis.com/oauth2/v4/token|jq .access_token -r<span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure></li>
<li>Albumä½œæˆ
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">DIR</span><span class="o">=</span>...
</span><span class='line'><span class="nv">ALBUM_ID</span><span class="o">=</span><span class="sb">`</span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{&quot;album&quot;:{&quot;title&quot;:&quot;&#39;</span><span class="nv">$DIR</span><span class="s1">&#39;&quot;}}&#39;</span> https://photoslibrary.googleapis.com/v1/albums|jq -r .id<span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure></li>
<li><code>~/photo/$DIR</code>ä»¥ä¸‹ã®<code>img_*.jpg</code> filesã®uploadã¨albumç™»éŒ²(ç´„100 filesæ¯ã«<code>ACCESS_TOKEN</code>ã®refresh)</li>
</ul>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="k">for </span>i in ~/photo/<span class="nv">$DIR</span>/img_*.jpg; <span class="k">do if</span> <span class="o">[</span> ! <span class="k">${</span><span class="nv">i</span><span class="p">##*00.jpg</span><span class="k">}</span> <span class="o">]</span>;<span class="k">then </span><span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s --data <span class="s2">&quot;refresh_token=$REFRESH_TOKEN&quot;</span> --data <span class="s2">&quot;client_id=$CLIENT_ID&quot;</span> --data <span class="s2">&quot;client_secret=$CLIENT_SECRET&quot;</span> --data <span class="s2">&quot;grant_type=refresh_token&quot;</span> https://www.googleapis.com/oauth2/v4/token|jq .access_token -r<span class="sb">`</span>;<span class="k">fi</span>;<span class="nv">UPLOAD_TOKEN</span><span class="o">=</span><span class="sb">`</span><span class="nv">FILENAME</span><span class="o">=</span><span class="nv">$DIR</span>/<span class="k">${</span><span class="nv">i</span><span class="p">##*/</span><span class="k">}</span>; curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s1">&#39;Content-type: application/octet-stream&#39;</span> -H <span class="s1">&#39;X-Goog-Upload-Protocol: raw&#39;</span> -H <span class="s2">&quot;X-Goog-Upload-File-Name: $FILENAME&quot;</span> --data-binary <span class="s2">&quot;@$i&quot;</span> https://photoslibrary.googleapis.com/v1/uploads<span class="sb">`</span>;curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{&quot;albumId&quot;:&quot;&#39;</span><span class="nv">$ALBUM_ID</span><span class="s1">&#39;&quot;,&quot;newMediaItems&quot;:[{&quot;simpleMediaItem&quot;:{&quot;uploadToken&quot;:&quot;&#39;</span><span class="nv">$UPLOAD_TOKEN</span><span class="s1">&#39;&quot;}}]}&#39;</span> https://photoslibrary.googleapis.com/v1/mediaItems:batchCreate|tee -a /tmp/upload.log|grep -q error&amp;&amp;echo <span class="nv">$i</span>;<span class="k">done</span>|tee /tmp/upload_failed.log
</span></code></pre></td></tr></table></div></figure>
<p>uploadã«å¤±æ•—ã—ãŸfile namesãŒæ¨™æº–å‡ºåŠ›ã¨<code>/tmp/upload_failed.log</code>ã«å‡ºã¦ãã‚‹ã®ã§ã€å¾Œåˆ»ãã‚Œã‚‰ã‚’retryã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="k">for </span>i in <span class="sb">`</span>cat /tmp/upload_failed.log<span class="sb">`</span>; <span class="k">do if</span> <span class="o">[</span> ! <span class="k">${</span><span class="nv">i</span><span class="p">##*00.jpg</span><span class="k">}</span> <span class="o">]</span>;<span class="k">then </span><span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s --data <span class="s2">&quot;refresh_token=$REFRESH_TOKEN&quot;</span> --data <span class="s2">&quot;client_id=$CLIENT_ID&quot;</span> --data <span class="s2">&quot;client_secret=$CLIENT_SECRET&quot;</span> --data <span class="s2">&quot;grant_type=refresh_token&quot;</span> https://www.googleapis.com/oauth2/v4/token|jq .access_token -r<span class="sb">`</span>;<span class="k">fi</span>;<span class="nv">UPLOAD_TOKEN</span><span class="o">=</span><span class="sb">`</span><span class="nv">FILENAME</span><span class="o">=</span><span class="nv">$DIR</span>/<span class="k">${</span><span class="nv">i</span><span class="p">##*/</span><span class="k">}</span>; curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s1">&#39;Content-type: application/octet-stream&#39;</span> -H <span class="s1">&#39;X-Goog-Upload-Protocol: raw&#39;</span> -H <span class="s2">&quot;X-Goog-Upload-File-Name: $FILENAME&quot;</span> --data-binary <span class="s2">&quot;@$i&quot;</span> https://photoslibrary.googleapis.com/v1/uploads<span class="sb">`</span>;curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{&quot;albumId&quot;:&quot;&#39;</span><span class="nv">$ALBUM_ID</span><span class="s1">&#39;&quot;,&quot;newMediaItems&quot;:[{&quot;simpleMediaItem&quot;:{&quot;uploadToken&quot;:&quot;&#39;</span><span class="nv">$UPLOAD_TOKEN</span><span class="s1">&#39;&quot;}}]}&#39;</span> https://photoslibrary.googleapis.com/v1/mediaItems:batchCreate|tee -a /tmp/upload.log|grep -q error&amp;&amp;echo <span class="nv">$i</span>;<span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>
<p>ã“ã‚Œã§ã¯batchå‡¦ç†ã‚’æ´»ã‹ã—ã¦ã„ãªã„(è¤‡æ•°ã®<code>UPLOAD_TOKEN</code>ã‚’batchCreateã—ã¦ã„ãªã„)ã®ã§ã™ãŒã€Googleã ã‘ã«å‰²ã¨ã™ãçµ‚ã‚ã‚‹ã“ã¨ã€error handlingãŒã‚ã¾ã‚Šã«ã‚‚è¤‡é›‘ã«ãªã‚‹ã“ã¨ã‹ã‚‰ã€éƒ½åº¦batchCreateã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p>
<p>ç§ã®å ´åˆã€1000 filesã§ç´„3GBå¼±ã€ã‚’ç›®å‡¦ã«åˆ†å‰²ã—ã¦uploadã—ã¦ã„ã¾ã™ã€‚
uploadã—ãŸfilesã¯å…¨ã¦ã€Œå…ƒã®ã‚µã‚¤ã‚ºã€ã§ä¿å­˜ã•ã‚Œã¦ã—ã¾ã„ã€Google Driveã®å®¹é‡ã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã†ã®ã§ã€<a href="https://photos.google.com/settings">è¨­å®š</a>ã‹ã‚‰ã€Œå®¹é‡ã‚’è§£æ”¾ã€ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã“ã‚ŒãŒã€Œ1æ—¥1å›ã€ã¨ãªã£ã¦ã„ã‚‹ã‚‚ã®ã®ã€ã ã‹ã‚‰ã¨ã„ã£ã¦24æ™‚é–“å¾Œã«å†åº¦å®Ÿè¡Œã—ã¦ã‚‚ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’åœ§ç¸®ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å¾©å…ƒã§ãã‚‹ã®ã¯ 1 æ—¥ 1 å›ã ã‘ã§ã™ã€‚ã€ã¨è¨€ã‚ã‚Œã¦å‡ºæ¥ãšã€å›°ã£ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«å†åº¦å®Ÿè¡Œã§ãã‚‹ã¾ã§ã«ã¯1.5æ—¥ã€œ2æ—¥ã‹ã‹ã‚‹ã‚ˆã†ã§ã€ã“ã‚ŒãŒæœ€å¤§ã®neckã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<h2>æ–°è¦Albumã¸ã®æ—¢å­˜filesè¿½åŠ </h2>
<p>ã“ã‚Œã¯ãƒ€ãƒ¡ã§ã—ãŸã€‚
ä½•åº¦è©¦ã—ã¦ã‚‚ãƒ€ãƒ¡ã ã£ãŸã®ã§ã€èª¿ã¹ã¦ã¿ã‚‹ã¨ã€å…¬å¼Documentã«ã€
<a href="https://developers.google.com/photos/library/guides/manage-albums">Note that you can only add media items that have been uploaded by your application to albums that your application has created.</a>ã¨ã‚ã‚Šã¾ã™ã€‚
ãªã‚“ã§ã‚„ã­ã‚“!
ä½•ã§æ—¢å­˜ã®ç”»åƒã¨APIçµŒç”±ã®ç”»åƒã¨ã‚’åŒºåˆ¥ã™ã‚‹ã®ã‹ã€ã‚ã‘ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚
ãã‚Œã˜ã‚ƒãã€ã£ã¦ã„ã†ã‚“ã§ã€æ—¢ã«Google Photosä¸Šã«ã‚ã‚‹å†™çœŸã‚‚æ”¹ã‚ã¦uploadã—ã¦albumã«addã—ãŸã‚‰ã€ãã‚Œã¯å‡ºæ¥ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã€Œå…ƒã®ã‚µã‚¤ã‚ºã€ã«ãªã£ã¦ã—ã¾ã£ã¦å®¹é‡ã‚’é£Ÿã£ã¦ã—ã¾ã„ã¾ã™ã€‚ã“ã‚Œã«ã¤ã„ã¦ã‚‚ã€Œå®¹é‡ã‚’è§£æ”¾ã€ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
å…¨ãä¸ƒé¢å€’è‡­ã„ã‚‚ã®ã§ã™ã€‚</p>
<p>ã¡ãªã¿ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚„ã‚Šã¾ã—ãŸã€‚paginationãŒç™ºç”Ÿã—ãªã„ç¨‹åº¦ã®Albumé™å®šã§ã€
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ DIR</span><span class="o">=</span>20171005
</span><span class='line'><span class="nv">$ ALBUM_ID</span><span class="o">=</span><span class="sb">`</span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{ &quot;album&quot;: { &quot;title&quot;:&quot;&#39;</span><span class="nv">$DIR</span><span class="s1">&#39;&quot; } }&#39;</span> https://photoslibrary.googleapis.com/v1/albums|jq -r .id<span class="sb">`</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ MEDIA_ITEMS</span><span class="o">=</span><span class="sb">`</span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{&quot;pageSize&quot;:&quot;100&quot;,&quot;filters&quot;:{&quot;dateFilter&quot;:{&quot;dates&quot;:[{&quot;year&quot;:2017,&quot;month&quot;:10,&quot;day&quot;:5}]}}}&#39;</span> https://photoslibrary.googleapis.com/v1/mediaItems:search|jq .mediaItems<span class="o">[]</span>.id|sed -z <span class="s1">&#39;s/\n/,/g&#39;</span><span class="sb">`</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{&quot;mediaItemIds&quot;:[&#39;</span><span class="nv">$MEDIA_ITEMS</span><span class="s1">&#39;]}&#39;</span> https://photoslibrary.googleapis.com/v1/albums/<span class="k">${</span><span class="nv">ALBUM_ID</span><span class="k">}</span>:batchAddMediaItems
</span><span class='line'><span class="o">{</span>
</span><span class='line'>  <span class="s2">&quot;error&quot;</span>: <span class="o">{</span>
</span><span class='line'>    <span class="s2">&quot;code&quot;</span>: 400,
</span><span class='line'>    <span class="s2">&quot;message&quot;</span>: <span class="s2">&quot;Request contains an invalid media item id.&quot;</span>,
</span><span class='line'>    <span class="s2">&quot;status&quot;</span>: <span class="s2">&quot;INVALID_ARGUMENT&quot;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
ãªã‚‰æ—¢å­˜ã®ã‚‚ã®ã¯æ‰‹ã§ã‚„ã‚Œã°ã„ã„ã§ã¯ãªã„ã‹?
ã‚„ã£ã¦ã¿ãŸã®ã§ã™ãŒã€å¾®å¦™ã«æ‰‹å…ƒã®filesã¨æ•°ãŒåˆã‚ãªã‹ã£ãŸã‚Šã™ã‚‹ã®ã§ã€å›°é›£ã§ã™ã€‚æ‰‹å…ƒã«3282æšã‚ã£ã¦Google Photosã®Albumã«3281æšã‚ã£ãŸæ™‚ã€ã©ã†ã‚„ã£ã¦å·®åˆ†ã‚’ã‚ã¶ã‚Šå‡ºã—ãŸã‚‰ã„ã„ã®ã§ã™ã‹?! å…¨downloadã¯ãªã—ã§ã€‚ã‚‚ã†ä¸€ã¤ã§ã¯ã€æ‰‹å…ƒã«5221æšã€Google Photosã«5230æšã¨å¢—ãˆã¦ã¾ã™! Manuallyã§ã¯é™ç•Œã‚’æ„Ÿã˜ã¾ã—ãŸã€‚</p>
<h2>Albumä¸­ã®å…¨fileåå–å¾—</h2>
<p>è‡ªå·±è§£æ±ºã—ã¾ã—ãŸã€‚
<code>NEXT_PAGE_TOKEN</code>ã‚ã‚‹ã¨é¢å€’ãã•ã„ã‚“ã§ã™ã‘ã©ã€ã“ã‚Œã§ä½•ã¨ã‹ã€‚</p>
<h3>Albumæ¢ã—</h3>
<p>æœ€åˆã®pageã«ç›®çš„ã®albumãŒã‚ã‚‹ã‹ã‚’ã“ã‚Œâ†“ã§æ¢ã™</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>curl -s -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> <span class="s1">&#39;https://photoslibrary.googleapis.com/v1/albums?pageSize=50&#39;</span>|jq -r .albums<span class="o">[]</span>.title,.nextPageToken
</span></code></pre></td></tr></table></div></figure>
ãªã‘ã‚Œã°æ¬¡ã®pageã¸ã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>curl -s -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> <span class="s1">&#39;https://photoslibrary.googleapis.com/v1/albums?pageSize=50&amp;pageToken=Ck...&#39;</span>|jq -r .albums<span class="o">[]</span>.title,.nextPageToken
</span></code></pre></td></tr></table></div></figure>
<p>è¦‹ä»˜ã‹ã‚Œã°ã€<code>ALBUM_ID</code>ã‚’åŒå®šã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>curl -s -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> <span class="s1">&#39;https://photoslibrary.googleapis.com/v1/albums?pageSize=50&amp;pageToken=Ck...&#39;</span>|grep -1 20080318
</span><span class='line'>      <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;ADI...&quot;</span>,
</span><span class='line'>      <span class="s2">&quot;title&quot;</span>: <span class="s2">&quot;20080318&quot;</span>,
</span><span class='line'>      <span class="s2">&quot;productUrl&quot;</span>: <span class="s2">&quot;https://photos.google.com/lr/album/ADI...&quot;</span>,
</span></code></pre></td></tr></table></div></figure>
<p>ãã†ã—ã¦ã‹ã‚‰å¾ã«ã€
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">ALBUM_ID</span><span class="o">=</span>...
</span><span class='line'><span class="nv">NEXT_PAGE_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{&quot;pageSize&quot;:&quot;100&quot;,&quot;albumId&quot;:&quot;&#39;</span><span class="nv">$ALBUM_ID</span><span class="s1">&#39;&quot;}&#39;</span> https://photoslibrary.googleapis.com/v1/mediaItems:search|jq -r <span class="s1">&#39;.mediaItems[].filename,.nextPageToken&#39;</span>|tee /tmp/files.txt|tail -1<span class="sb">`</span>;<span class="k">while</span> <span class="o">[</span> <span class="s2">&quot;$NEXT_PAGE_TOKEN&quot;</span> !<span class="o">=</span> null <span class="o">]</span>;<span class="k">do </span><span class="nv">NEXT_PAGE_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s -X POST -H <span class="s2">&quot;Authorization: Bearer $ACCESS_TOKEN&quot;</span> -H <span class="s2">&quot;Content-type: application/json&quot;</span> -d <span class="s1">&#39;{&quot;pageSize&quot;:&quot;100&quot;,&quot;albumId&quot;:&quot;&#39;</span><span class="nv">$ALBUM_ID</span><span class="s1">&#39;&quot;,&quot;pageToken&quot;:&quot;&#39;</span><span class="nv">$NEXT_PAGE_TOKEN</span><span class="s1">&#39;&quot;}&#39;</span> https://photoslibrary.googleapis.com/v1/mediaItems:search|jq -r <span class="s1">&#39;.mediaItems[].filename,.nextPageToken&#39;</span>|tee -a /tmp/files.txt|tail -1<span class="sb">`</span>;<span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>
<p>ãã®å¾Œã€</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>grep -vE -e <span class="s1">&#39;.{300,}&#39;</span> -e null /tmp/files.txt
</span></code></pre></td></tr></table></div></figure>
<p>ã§å–ã‚Šå‡ºã›ã¾ã™ã€‚</p>
<p>ãã‚Œã§æ¯”è¼ƒ(<code>diff -y --suppress-common-lines &lt;(cd ~/photo;ls .../img_*|sort) &lt;(grep -vE -e '.{300,}' -e null /tmp/files.txt|sort)</code>)ã—ãŸã¨ã“ã‚ã€è¶³ã‚Šãªã„ã‚‚ã®ã¯ã‚ã‹ã‚Šã¾ã—ãŸã€‚
ã§ã™ãŒã€ä½•æ•…ã‹APIã§å–ã‚‹ã¨3282å€‹ãªã®ã«
ã€Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„ 3283å€‹ã€ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã‚Š...
ã‚ˆãç²¾æŸ»ã™ã‚‹ã¨ã€ãªã‚‹ã»ã©ã€Google PhotosãŒå‹æ‰‹ã«?ä½œã£ãŸã€
<a href="https://photos.google.com/assistant">ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ</a>ã«ã‚ã‚‹
<code>MOVIE.mp4</code>(ãƒ ãƒ¼ãƒ“ãƒ¼)ã‚„<code>...-EFFECTS.jpg</code>(ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã—ãŸå†™çœŸ)ã€
<code>...-PANO.jpg</code>(ãƒ‘ãƒãƒ©ãƒ)ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã‚‰?
ã„ã‚„ã€ä¸€ã¤(5230å€‹ã¨è¡¨ç¤º)ã¯ãã‚ŒãŒåŸå› ã§9å€‹å¤šãæ•°ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãŸã®ã§ã™ãŒã€
ã‚‚ã†ä¸€ã¤ã€ã€Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„ 3283å€‹ã€ã¯ã€APIã§å–å¾—ã™ã‚‹ã¨ã„ãã‚‰è¦‹ã¦ã‚‚
3282å€‹ã—ã‹ãªã„ã€è‡ªå‹•ç”Ÿæˆç‰©ã‚‚ãªã„ã€ã§ã™ã€‚è¬ã§ã™ã€‚</p>
<p>ãã‚Œã¨ã€Enrichmentã¨ã‹ã„ã£ã¦Textã‚„Locationã¨Mapã‚’å…¥ã‚Œã‚‰ã‚Œã‚‹ã‚“ã§ã™ã‘ã©ã€
ãã‚Œã‚‰ã‚’å–å¾—ã™ã‚‹è¡“ãŒãªãã€Textã«æ›¸ã„ãŸã“ã¨ã‚’æ¤œç´¢ã™ã‚‹ã¨ã‹ã‚‚å‡ºæ¥ãšã€‚
GUIã‹ã‚‰å…¥ã‚Œã¦ã¿ã¾ã—ãŸãŒã€è¦ç´ ã‚’è¿½åŠ ã™ã‚‹åº¦ã«ã„ã¡ã„ã¡å…ˆé ­ã«æˆ»ã•ã‚Œã‚‹ã€
ç§»å‹•ã™ã‚‹ã¨ä»–ã®è¦ç´ ã‚‚ã©ã“ã‹ã«è¡Œã£ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€
ç­‰ä½•ã ã‹ãªãã€ã¨ã„ã†ã‚‚ã®ã§ã—ãŸã€‚
Googleãªã‚‰ã“ã‚“ãªã‚‚ã‚“ã˜ã‚ƒãªã„ã ã‚ãƒ¼!</p>
]]></content></entry><entry><title type="html"><![CDATA[3 good things in this week]]></title><link href="http://u-ryo.github.io//blog/2019/01/28/3-good-things-in-this-week/"/><updated>2019-01-28T01:01:51+09:00</updated><id>/blog/2019/01/28/3-good-things-in-this-week/</id><content type="html"><![CDATA[<p>ã¾ãŸå¹¸ã›ã«ãªã‚‹ãŸã‚?ã«ã€
å…ˆé€±3ã¤è‰¯ã‹ã£ãŸã“ã¨ã‚’ä¸¦ã¹ã¦ã¿ã¾ã™ã€‚</p>
<ul>
<li>ãƒã‚¤ãƒˆã§ç™ºè¡¨ã‚’ä½•ã¨ã‹å‡Œã’ãŸã“ã¨(ã§ã‚‚æœ¬ç•ªã®reportã‚’æ›¸ãä¸Šã’ã‚‹ç­ˆã®ã“ã®åœŸæ—¥ã€ã¾ãŸãªãã‚“ã«ã‚‚ã—ã¾ã›ã‚“ã§ã—ãŸ...orz)</li>
<li>è·å ´ã§å®šæœŸæœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ã‚’ç„¡äº‹?çµ‚ãˆãŸã“ã¨(å®Œå…¨ã«ä»˜ãã£ãã‚Šã§ã—ãŸã‘ã©ã€‚ã¾ãæœ€åˆã ã‹ã‚‰ä»•æ–¹ã‚ã‚Šã¾ã›ã‚“ã‚ˆã­ã€‚ã‘ã©æ¬¡ã®ãƒªãƒªãƒ¼ã‚¹ã€ä¸€äººã§å‡ºæ¥ã‚‹ã‹ãª?)</li>
<li>Paiza S Rankã€CodeIQ S Rankã‚’æŒã£ã¦ã„ãŸã“ã¨(ã§ã‚‚ã“ã‚“ãªå½¹ã«ç«‹ãŸãªã„ã‚‚ã®è‡ªæ…¢?ã¨ã„ã†ç¨‹ã®ã‚‚ã®ã§ã¯ãªã„ã«ã—ã¦ã‚‚ã€ä½•ã ã‹ã€ã§ã™ãŒã€‚ã¿ã¿ã£ã¡ãƒãªã...)</li>
</ul>
<p>ã‚ã¨ã€12æœˆåŠæœˆåˆ†ã®çµ¦æ–™ã‚‚ã„ã£ãºã‚“ã«å‡ºãŸã®ã§ã€
ä»Šå›ã®ç·é¡ãŒå¤šã‹ã£ãŸã“ã¨ã€ã¨ã‹?</p>
<p>è‰¯ããªã„ã“ã¨ã¯æ²¢å±±æ€ã„ä»˜ãã‚“ã§ã™ã‘ã©ã€
ãã‚Œã˜ã‚ƒãã„ã‘ãªã„ã‚“ã§ã™ã‚ˆã­ã€‚
ã—ã‹ã—ã¾ãã€ç·ä½“çš„ã«ã¯å¥æ°—ã«ç”Ÿãã¦ã„ã¾ã™ã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[Omega3 fatty acids]]></title><link href="http://u-ryo.github.io//blog/2019/01/24/omega3-fatty-acids/"/><updated>2019-01-24T05:13:51+09:00</updated><id>/blog/2019/01/24/omega3-fatty-acids/</id><content type="html"><![CDATA[<p>å»å¹´11æœˆã®<a href="http://www9.nhk.or.jp/gatten/articles/20181121/">ãŸã‚ã—ã¦ã‚¬ãƒƒãƒ†ãƒ³</a>ã‚„ä¸€æ˜¨å¹´ã®<a href="http://www.nhk.or.jp/beautyscience-blog/2017/101/">ç¾ã¨è‹¥ã•ã®æ–°å¸¸è­˜</a>ã§ã‚‚ã‚„ã£ã¦ãŸã‚ˆã†ã«ã€
ã‚ªãƒ¡ã‚¬3è„‚è‚ªé…¸ã¨ã—ã¦äºœéº»ä»æ²¹ã‚¹ãƒ—ãƒ¼ãƒ³ä¸€æ¯ã‚’å§‹ã‚ã¦ã¿ãŸã¨ã“ã‚ã€
1ãƒ¶æœˆçµŒãŸãšã—ã¦ãƒ›ãƒ³ãƒˆã«åŠ¹æœãŒã‚ã‚Šã¾ã—ãŸã€‚
ã¨ã„ã†ã®ã‚‚ã€é¼»è¡€ãŒå‡ºã‚„ã™ããªã£ãŸã‚Šã€
ç—”æ ¸ã‹ã‚‰ã®è¡€ä¾¿ãŒå‡ºãŸã‚Šã¨ã€
ã€Œè¡€æ¶²ã‚µãƒ©ã‚µãƒ©ã€ã£ã¦ã“ã†ã„ã†ã“ã¨ã‹ãƒ¼ã¨ã®è‡ªè¦šãŒã€‚
è¡€å°æ¿ã®åƒããŒæŠ‘ãˆã‚‰ã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚
ã‚ã¨ã€ã“ã®å¯’ã„ä¸­ã€æœªã ã«ã‚¹ãƒˆãƒ¼ãƒ–ä»˜ã‘ã¦ãªãã¦ã‚‚é ‘å¼µã£ã¦ã„ã‚‰ã‚Œã‚‹ã€
ã¨ã„ã†ã®ã‚‚åŠ¹æœã®ä¸€ã¤ã‹ã¨ã€‚
æœ€è¿‘ãŠé­šã‚’é¸æŠã§ãã‚‹ã‚ã—å‡¦æ¸›ã£ã¡ã‚ƒã£ãŸã®ã§ã€
ã‚ªãƒ¡ã‚¬3è„‚è‚ªé…¸ã®å¼·åˆ¶æ‘‚å–ã¯å¿…è¦ãªã‚“ã ã‚ã†ãªãã€‚
ãã‚Œã«ã—ã¦ã‚‚é«˜ã„ã§ã™ã­ãˆã”ã¾æ²¹ã¨ã‹äºœéº»ä»æ²¹ã£ã¦ã€‚
ãã‚Œã§ã‚‚è¥¿å‹ã§ãˆã”ã¾æ²¹ãªã‚“ã‹çµ¶ãˆã¦ä¹…ã—ã„ã§ã™ã€‚</p>
<h3>å‚è€ƒ:</h3>
<ul>
<li><a href="http://www.sciencecomlabo.jp/">ç–‘ä¼¼ç§‘å­¦ã¨ã•ã‚Œã‚‹ã‚‚ã®ã®ç§‘å­¦æ€§è©•å®šã‚µã‚¤ãƒˆ</a>ã®<a href="http://www.sciencecomlabo.jp/healthy_food/dha.epa">DHAãƒ»EPA</a></li>
<li><a href="https://www.umablo.net/entry/äºœéº»ä»æ²¹ã®åƒãã¨å±é™ºæ€§">ã‚¤ãƒ©ã‚¹ãƒˆå¾¹åº•è§£èª¬ï¼ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã«äººæ°—ã®äºœéº»ä»æ²¹ã®åŠ¹èƒ½ã¨å‰¯ä½œç”¨ãƒ»æ³¨æ„ç‚¹ã¨ã¯ï¼Ÿ</a></li>
</ul>
]]></content></entry><entry><title type="html"><![CDATA[Deeplooks]]></title><link href="http://u-ryo.github.io//blog/2019/01/24/deeplooks/"/><updated>2019-01-24T04:57:31+09:00</updated><id>/blog/2019/01/24/deeplooks/</id><content type="html"><![CDATA[<p><a href="https://deeplooks.com/">Deeplooks</a>ã¨ã„ã†ã€
é¡”ã®è‰¯ã•?ã‚’å†·å³ã«åˆ¤å®šã™ã‚‹siteãŒã‚ã‚‹ã®ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚
ã‚¢ãƒ—ãƒªã¨ã‹ã ã¨é¡”ã®partsã®å¯¾ç§°æ€§ã‚„é»„é‡‘æ¯”ãªã©ã‹ã‚‰ç®—å‡ºã™ã‚‹ã¿ãŸã„ã§ã™ãŒã€
ã“ã‚Œã¯deep learningã®è“„ç©ã«ã‚ˆã‚‹ã‚‚ã®ã ã¨ã€‚
è©¦ã—ã¦ã¿ã‚‹ã¨ã€ã¼ãã®å†™çœŸã§ã¯ã©ã†ã‚„ã£ã¦ã‚‚2.5ã€œ2.7ãŒã›ã„ãœã„ã€‚
åŒã˜å†™çœŸã§ã‚‚æ‹¡å¤§ç‡ã«ã‚ˆã£ã¦2.5ã€œ2.7ã®é–“ã§ã¶ã‚Œã¾ã™ã­ã€‚
ç¬‘é¡”ãªã©è¡¨æƒ…ã§ã¯å¤‰ã‚ã‚‰ãªã„ã‚ˆã†ã§ã™ã€‚
ã¾ãŸã€å¥³æ€§ã®æ–¹ãŒé«˜ã‚ã«å‡ºã‚‹ã‚ˆã†ã§ã™ã€‚
ãªã®ã§ã€0.2ç¨‹åº¦ã¯èª¤å·®ãŒã‚ã‚‹ã‚‚ã®ã¨ã€‚
ãã‚Œã«ã—ã¦ã‚‚ã€ã¼ãå¦‚ãã§ã¯3ã¨ã‹4ã¯å‡ºãã†ã«ã‚ã‚Šã¾ã›ã‚“ã€‚
ç¢ºã‹ã«ã€Œã“ã®äººç¾äººã ãªãã€ã¨ã„ã†äººã‚’å…¥ã‚Œã‚Œã°é«˜å¾—ç‚¹ãªã®ã§ã€
å®¢è¦³çš„æŒ‡æ¨™ã«ãªã‚Šãã†ã§ã™ã€‚
Deeplooksã®ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªã¯ãªã„ã§ã™ãŒã€
æ™®é€šã«browserã§accessã™ã‚Œã°ã€ãã®å ´ã§æ’®ã£ãŸå†™çœŸã§åˆ¤å®šã§ãã‚‹ã®ã§ååˆ†ã§ã™ã€‚
ãŸã ã“ã‚Œã€submitã—ãŸå†™çœŸã¯è“„ç©ã•ã‚Œã¦ã„ãã‚ˆã†ã§ã€ã—ã¾ã£ãŸ!</p>
]]></content></entry><entry><title type="html"><![CDATA[Positive Psychology]]></title><link href="http://u-ryo.github.io//blog/2019/01/24/positive-psychology/"/><updated>2019-01-24T04:49:26+09:00</updated><id>/blog/2019/01/24/positive-psychology/</id><content type="html"><![CDATA[<p>ãƒã‚¸ãƒ†ã‚£ãƒ–å¿ƒç†å­¦ã«ã¤ã„ã¦èª¿ã¹ã¦ã¦ã€
<a href="https://lightworks-blog.com/pos-psych-strength">ã€”ãƒã‚¸ãƒ†ã‚£ãƒ–å¿ƒç†å­¦ã€•ã‚ãªãŸãŒæ°—ã¥ã‹ãªã‹ã£ãŸã€Œå¼·ã¿ã€ã‚’å¼•ãå‡ºã™æ–¹æ³•</a>ã‚’èª­ã‚“ã§ã„ãŸã‚‰ã€
CS(Character Strength)ã‚’æ¸¬ã‚‹(ã€ã©ã‚ŒãŒè‡ªåˆ†ã®ã€Œå¼·ã¿ã€ãªã®ã‹ã‚’ç°¡å˜ã«èª¿ã¹ã‚‰ã‚Œã‚‹ã‚µãƒ¼ãƒ™ã‚¤ã‚’ç„¡æ–™ã§å—ã‘ã‚‹ã“ã¨ãŒã§ãã€ã‚‹)<a href="https://www.viacharacter.org/Survey/Account/Register">VIA Institute on Character</a>ã¨ã„ã†ã®ãŒã‚ã‚‹ã¨ã„ã†ã®ã§ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚</p>
<ol>
<li>å‘å­¦å¿ƒ</li>
<li>å‹‡æ•¢ã•</li>
<li>å¥½å¥‡å¿ƒ</li>
</ol>
<p>ã ãã†ã§ã™ã€‚
å¯©ç¾çœ¼ã€æ€æ…®æ·±ã•ã€ã¨ç¶šãã¾ã™ã€‚</p>
<p>ã†ãƒ¼ã€‚</p>
<p>ä¸‹ä½ã¯ã€ä¸‹(24ä½)ã‹ã‚‰ã€</p>
<ol>
<li>æ„›æƒ…</li>
<li>æ„Ÿè¬</li>
<li>æ…ã¿æ·±ã•</li>
<li>ç†±æ„</li>
</ol>
<p>è€³ãŒç—›ã„ã§ã™ã€‚
team workã¯14ç•ªç›®ã€‚
ã‚ã†ãƒ¼ã€‚
ã‚‚ã†ã—ã‚‡ã†ãŒãªã„ã®ã‹ãªãã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[Funny Patents]]></title><link href="http://u-ryo.github.io//blog/2019/01/24/funny-patents/"/><updated>2019-01-24T04:42:06+09:00</updated><id>/blog/2019/01/24/funny-patents/</id><content type="html"><![CDATA[<p>å¼ç†å£«ã•ã‚“ã®è©±ãŒå‡ºã¦ã€
ç‰¹è¨±ã¨è¨€ãˆã°èµ¤åŸå¾³å·åŸ‹è”µé‡‘ã¨ã‹å¤‰ãªã®ã‚ã‚Šã¾ã™ã‚ˆã­ãƒ¼ã€
ã£ã¦è©±ã§ã€ã•ã‚‰ã£ã¨èª¿ã¹ã¦ã¿ã‚‹(<a href="https://anond.hatelabo.jp/20120202011001">ãƒ¤ãƒã„ç‰¹è¨±</a>)ã¨è‰²ã€…ã‚ã‚‹ã‚“ã§ã™ã­ã‡ä»–ã«ã‚‚ã€‚
ã€Œå¤ªé™½ã®å£ºã€ã¨ã‹ã£ã¦æ®†ã©å°èª¬ã§ã™ã‹?
ã£ã¦ã„ã†æ„Ÿã˜ã§ã™ã‘ã©ã€ã©ã†ã—ã¦ã“ã†ã„ã†ã®é€šã‚‹ã‚“ã§ã—ã‚‡ã†ã‹?
å½¹äººãŒã‚¶ãƒ«ã ã‹ã‚‰??
ä¸æ€è­°ã§ãªã‚Šã¾ã›ã‚“ã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[Learn Python 3 the Hard Way]]></title><link href="http://u-ryo.github.io//blog/2019/01/24/learn-python-3-the-hard-way/"/><updated>2019-01-24T04:34:38+09:00</updated><id>/blog/2019/01/24/learn-python-3-the-hard-way/</id><content type="html"><![CDATA[<p>çŸ¥äººãŒ<a href="https://www.amazon.co.jp/Learn-Python-Hard-Way-Introduction-ebook/dp/B07378P8W6">Learn Python 3 the Hard Way</a>ã‚’<a href="https://www.amazon.co.jp/Learn-Python-Hard-Way-%E6%9B%B8%E3%81%84%E3%81%A6%E8%A6%9A%E3%81%88%E3%82%8BPython%E5%85%A5%E9%96%80/dp/4621303287">ç¿»è¨³ã—ã¾ã—ãŸ</a>ã€‚
å‡„ã„ãªãã¨æ€ã†ã¨åŒæ™‚ã«ã€
è¦‹ã¦ã¿ã‚‹ã¨æ—¢ã«<a href="https://learnpythonthehardway.org/">è‹±èªç‰ˆ</a>ã§<a href="http://blog.sayajewels.com/posts/janiota-python-practice/">å‹‰å¼·ã—ãŸäººãŒã„ã‚‹</a>ã¨ã„ã†ã®ã§ã€
ãã®äººãŒã‚„ã£ãŸã¨ã„ã†åˆå¿ƒè€…ç”¨ç·´ç¿’å•é¡Œã‚’ã€
ã‚¸ãƒ£ãƒ‹ãƒ²ã‚¿ã˜ã‚ƒãªã„ã®ã§ã€
ã¨ã„ã†ã‹åˆå¿ƒè€…ã§ã¯ãªã„ã®ã§ã€Œä¸€è¡Œã§ã€ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>&gt;&gt;&gt; def average_age(members):
</span><span class='line'>...  return sum([x[2] for x in members])/len(members)
</span><span class='line'>...
</span><span class='line'>&gt;&gt;&gt; average_age([(&#39;s&#39;,&#39;s&#39;,35),(&#39;a&#39;,&#39;a&#39;,34),(&#39;n&#39;,&#39;n&#39;,34),(&#39;d&#39;,&#39;o&#39;,36),(&#39;j&#39;,&#39;j&#39;,34)])
</span><span class='line'>34.6
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt; def oldest_member(members):
</span><span class='line'>...  return max(members, key=(lambda x:x[2]))[0]
</span><span class='line'>...
</span><span class='line'>&gt;&gt;&gt; oldest_member([(&#39;s&#39;,&#39;s&#39;,35),(&#39;a&#39;,&#39;a&#39;,34),(&#39;n&#39;,&#39;n&#39;,34),(&#39;d&#39;,&#39;o&#39;,36),(&#39;j&#39;,&#39;j&#39;,34)])
</span><span class='line'>&#39;d&#39;
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt; def second_oldest_member(members):
</span><span class='line'>...  return sorted(members, key=(lambda x:x[2]))[1][0]
</span><span class='line'>...
</span><span class='line'>&gt;&gt;&gt; second_oldest_member([(&#39;s&#39;,&#39;s&#39;,35),(&#39;a&#39;,&#39;a&#39;,34),(&#39;n&#39;,&#39;n&#39;,34),(&#39;d&#39;,&#39;o&#39;,36),(&#39;j&#39;,&#39;j&#39;,34)])
</span><span class='line'>&#39;n&#39;
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt; def next_older_member(members, nickname):
</span><span class='line'>...  return min([a for a in members if a[2] &gt; [b for b in members if b[0]==nickname][0][2]],key=(lambda x:x[2]))[0]
</span><span class='line'>...
</span><span class='line'>&gt;&gt;&gt; next_older_member([(&#39;st&#39;,&#39;ms&#39;,19),(&#39;m&#39;,&#39;my&#39;,17),(&#39;k&#39;,&#39;nk&#39;,23),(&#39;f&#39;,&#39;kf&#39;,22),(&#39;sh&#39;,&#39;ss&#39;,20)],&#39;f&#39;)
</span><span class='line'>&#39;k&#39;
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt; def check_future_age(current_members, future_members):
</span><span class='line'>...  return len({i[2]-j[2] for i,j in zip(current_members,future_members)}) == 1
</span><span class='line'>...
</span><span class='line'>&gt;&gt;&gt; check_future_age([(&#39;st&#39;,&#39;ms&#39;,19),(&#39;m&#39;,&#39;my&#39;,17),(&#39;k&#39;,&#39;nk&#39;,23),(&#39;f&#39;,&#39;kf&#39;,22),(&#39;sh&#39;,&#39;ss&#39;,20)],[(&#39;st&#39;,&#39;ms&#39;,22),(&#39;m&#39;,&#39;my&#39;,20),(&#39;k&#39;,&#39;nk&#39;,26),(&#39;f&#39;,&#39;kf&#39;,25),(&#39;sh&#39;,&#39;ss&#39;,23)])
</span><span class='line'>True
</span><span class='line'>&gt;&gt;&gt; check_future_age([(&#39;st&#39;,&#39;ms&#39;,19),(&#39;m&#39;,&#39;my&#39;,17),(&#39;k&#39;,&#39;nk&#39;,23),(&#39;f&#39;,&#39;kf&#39;,22),(&#39;sh&#39;,&#39;ss&#39;,20)],[(&#39;st&#39;,&#39;ms&#39;,22),(&#39;m&#39;,&#39;my&#39;,20),(&#39;k&#39;,&#39;nk&#39;,26),(&#39;f&#39;,&#39;kf&#39;,25),(&#39;sh&#39;,&#39;ss&#39;,24)])
</span><span class='line'>False
</span></code></pre></td></tr></table></div></figure>
<p>ã‚ãã€ãªã‚“ã¦ã‚¢ãƒ›ãªã“ã¨ã«æ™‚é–“ã¨é ­ã‚’ä½¿ã£ã¦ã—ã¾ã£ãŸ...</p>
<p><code>min</code>ã€<code>max</code>ã€<code>sorted</code>ã£ã¦ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã§å‡ºæ¥ãªã„ã‚“ã§ã™ã‹?</p>
<p>å°ç¨ã¯åˆç‰ˆã§20ã€œ30ä¸‡ã€ã‚ã¨ã¯å¢—åˆ·ã§ã‚¬ãƒƒãƒã‚¬ãƒƒãƒã€ã ãã†ã§ã™ã€‚
1å¹´åŠã‹ã‹ã£ãŸã£ã¦ã€‚ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚
ã¼ãã‚‚è²©ä¿ƒã«å”åŠ›ã—ã¾ã—ã‚‡ã†ã‹ã­ã€‚
ãã—ã¦ãŠã“ã¼ã‚Œã«ã‚ãšã‹ã‚Œã‚Œã°!</p>
]]></content></entry><entry><title type="html"><![CDATA[lualatex error]]></title><link href="http://u-ryo.github.io//blog/2019/01/23/lualatex-error/"/><updated>2019-01-23T22:34:34+09:00</updated><id>/blog/2019/01/23/lualatex-error/</id><content type="html"><![CDATA[<p>Ubuntu 18.04ã«ãªã£ã¦ã‹ã‚‰ã‹ã€ã“ã‚Œã¾ã§é›£ãªãé€šã£ã¦ã„ãŸLuaLaTeXãŒ
é€šã‚‰ãªããªã£ã¦ã„ã¾ã—ãŸã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>(/usr/share/texlive/texmf-dist/tex/luatex/luatexja/patches/lltjp-stfloats.sty)
</span><span class='line'>ABD: EverySelectfont initializing macros
</span><span class='line'>! Undefined control sequence.
</span><span class='line'><span class="nt">&lt;argument&gt;</span> ...x \ifdim \paperheight &gt;0pt\relax \pdfpagewidth
</span><span class='line'>                                                  =\paperwidth \pdfpageheigh...
</span><span class='line'>
</span><span class='line'>l.5 \begin{document}
</span><span class='line'>?
</span></code></pre></td></tr></table></div></figure>
<p>version upã—ãŸã‹ã‚‰ã‹ãªã€
ãã®ã†ã¡é€šã‚‹ã‚ˆã†ã«ãªã‚‹ã‹ãªã€
ãã‚Œã¾ã§ã¯16.04æ¨ã¦ã‚‰ã‚Œãªã„ãªã€
ã¨ã‹æ€ã£ã¦ã»ã£ã½ã£ã¦ãŠã„ã¦ãŸã‚“ã§ã™ãŒã€
ä¸€å‘ã«è‰¯ããªã‚‰ãªã„ã®ã§ã€ã¡ã‚‡ã£ã¨èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚
LuaLaTeXè¿½ã£ã¦ã‚‹äººã«ã¯ä½•ã§ã‚‚ãªã„æƒ…å ±ã§ã—ã‚‡ã†ãŒã€
è‰²ã€…å¤‰ã‚ã£ã¦ãŸã‚“ã§ã™ã­ã€‚</p>
<p>çµè«–ã‹ã‚‰ç¤ºã—ã¾ã™ã¨ã€
<code>graphicx</code>ã®driverã‚’<code>pdftex</code>ã‹ã‚‰<code>luatex</code>ã«ã™ã‚‹
(â†’defaultã®è‡ªå‹•åˆ¤å®šã«ä»»ã›ã‚‹)ã‚ˆã†ã«ã™ã‚Œã°è‰¯ã‹ã£ãŸã§ã™ã€‚
å…·ä½“çš„ã«ã¯ã€</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>\usepackage[pdftex]{graphicx}
</span><span class='line'>   Ã¢Â†Â“
</span><span class='line'>\usepackage{graphicx}
</span></code></pre></td></tr></table></div></figure>
<p>ã ã‘ã§ã—ãŸ(ref.<a href="http://acetaminophen.hatenablog.com/entry/2016/04/23/141922">TeX Live 2016 ã®æ–°ã—ã„ LuaTeX ã‚ã‚Œã“ã‚Œ</a>)ã€‚
primitiveåãŒè‰²ã€…å¤‰ã‚ã£ã¦ã€
LuaTeXã®primitiveã«å¯¾å¿œã—ãŸ<code>luatex.def</code>ãŒå‡ºæ¥ã¦ã€
graphicx driverã®<code>luatex</code>ã¸ã®è‡ªå‹•åˆ¤å®š(<code>pdftex</code>ã§ã¯ãªã)ãŒ
å°å…¥ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[3 good things in this week]]></title><link href="http://u-ryo.github.io//blog/2019/01/13/3-good-things-in-this-week/"/><updated>2019-01-15T01:06:52+09:00</updated><id>/blog/2019/01/13/3-good-things-in-this-week/</id><content type="html"><![CDATA[<p>ã¨ã£ã¦ã‚‚ä»Šæ›´ã§ã™ãŒã€å‡„ã„æœ¬ã«å‡ºä¼šã„ã¾ã—ãŸã€‚
æƒ…å ±å‡¦ç†å­¦ä¼šèªŒã®ãƒ“ãƒ–ãƒªã‚ªãƒˆãƒ¼ã‚¯ã§ç´¹ä»‹ã•ã‚Œã¦ã„ãŸã€Œãƒ‡ãƒ¼ã‚¿ã®è¦‹ãˆã–ã‚‹æ‰‹ã€ã€
å¸°ã‚Šã«æ± è¢‹ä¸‰çœå ‚ã§100é ã¡ã‚‡ã£ã¨ç«‹ã¡èª­ã¿ã—ãŸã‚‰æ­¢ã¾ã‚‰ããªã£ã¡ã‚ƒã£ã¦ã€
ã‚‚ã†æœ¬ã‚’è²·ã†ã®ã¯ã‚„ã‚ã‚ˆã†ã¨æ€ã£ã¦ãŸã®ã«ã€è²·ã£ã¡ã‚ƒã„ã¾ã—ãŸã€‚
ã‚‚ã†å‡ºç‰ˆã‹ã‚‰4å¹´çµŒã£ã¦æ‰‹è»½ãªæ–‡åº«ã«ãªã£ã¦ã¾ã—ãŸã—ã€‚
ç™ºåˆŠãŒ2014ã€æ–‡åº«åŒ–ãŒ2018å¹´ã€ã§ã‚‚å†…å®¹ã¯å¤ããªã„ã€
ã¨ã„ã†ã‹èã„ãŸã“ã¨ãªã‹ã£ãŸã§ã™ã€‚
ã“ã®dog yearãªæŠ€è¡“é€²æ­©ã®ä¸­ã§!
èª¿ã¹ã¦ã¿ã‚‹ã¨<a href="https://industry-co-creation.com/industry-trend/6539">è«–æ–‡ã¨ã—ã¦å‡ºã—ã¦ãªã„ã§Closedã </a>ã£ã¦è¨€ã£ã¦ã¾ã—ãŸã‹ã‚‰ã€
ãã®ã›ã„?</p>
<p>ã“ã®æœ¬ã®å‡„ã„ã®ã¯ã€dataåˆ†æã«ç•™ã¾ã‚‰ãšã€
ã€Œå¹¸ã›ã¯ã€åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µã§æ¸¬ã‚Œã‚‹ã€ã¨å–ç ´ã—ã¦ã„ã‚‹ã¨ã“ã‚ã€‚
ãã†ã„ã†è€ƒå¯Ÿã¾ã§é€²ã‚ã‚‹ã¨ã„ã†ã®ãŒã€ãã“ã‚‰ã®AIã€big dataã®è©±ã¨
é•ã†ã¨ã“ã‚ã€ã§ã™ã€‚
(ã‚ˆãè¦‹ã‚‹ã¨ã€ã€Œçµ„ç¹”ã®ã€happiness?)</p>
<p>ãã®ä¸­ã§ã€
ä»Šé€±ã‚ã£ãŸã‚ˆã‹ã£ãŸã“ã¨3ã¤ã‚’10åˆ†ã§æ›¸ãå‡ºã™ã¨
happiness levelãŒé«˜ã¾ã£ãŸã€ã¨ã„ã†è©±ãŒã‚ã‚Šã¾ã—ãŸ(p.81)ã€‚
3ã¤æ›¸ãå‡ºã™æ‰‹æ³•è‡ªä½“ã¯å…±åŒç ”ç©¶è€…ã§Happinessã®å¿ƒç†å­¦(Positiveå¿ƒç†å­¦)ãŒå°‚é–€ã§
<a href="http://www.positivepsych.jp/pp6/book10.html">The How of Happiness: A Scientific Approach to Getting the Life You Want</a>ã®è‘—è€…
<a href="https://en.wikipedia.org/wiki/Sonja_Lyubomirsky">ãƒªãƒ¥ãƒœãƒŸãƒ«ã‚¹ã‚­(ãƒªãƒ¥ãƒœãƒŸã‚¢ã‚¹ã‚­ãƒ¼)æ•™æˆ</a>ã®
ã‚‚ã®ã ãã†ã§ã™ãŒã€
ãã‚Œã‚’wearable sensorã®æ¯”è¼ƒå®Ÿé¨“ã§è£ä»˜ã‘ãŸã¨ã€‚
ãã—ã¦è¨€ã„ã¾ã™ã€‚</p>
<blockquote><p>äººã®ãƒãƒ”ãƒã‚¹ã¯ã€æ„å¤–ã«å°ã•ãªã“ã¨ãŒæ±ºã‚ã¦ã„ã‚‹ã“ã¨ãŒå®Ÿè¨¼ã•ã‚ŒãŸã€‚(p.82)</p>
</blockquote>
<p>ã‚ãã€ã§ã‚‚ã‚ˆãèª­ã‚€ã¨ã€</p>
<ul>
<li>å¹¸ã›ã¯ã€ãŠã‚ˆãåŠåˆ†ã¯éºä¼çš„ã«æ±ºã¾ã£ã¦ã„ã‚‹</li>
<li>é©šãã¹ãã“ã¨ã«ã€ã“ã‚Œã‚‰ç’°å¢ƒè¦å› ã‚’ã™ã¹ã¦åˆã‚ã›ã¦ã‚‚ã€å¹¸ã›ã«å¯¾ã™ã‚‹å½±éŸ¿ã¯ã€å…¨ä½“ã®10%ã«ã™ããªã„</li>
<li>æ®‹ã‚Šã®40%ã¯ä½•ã ã‚ã†ã€‚...ãŸã¨ãˆã°ã€äººã«æ„Ÿè¬ã‚’è¡¨ã™ã€å›°ã£ã¦ã„ã‚‹äººã‚’åŠ©ã‘ã¦ã‚ã’ã‚‹ã€ã¨ã„ã†ä¸€è¦‹ç°¡å˜ãªã“ã¨ã§ã‚‚ã€å®Ÿã¯ãƒãƒ”ãƒã‚¹ã¯æ ¼æ®µã«é«˜ã¾ã‚‹</li>
</ul>
<p>ã¨ã„ã£ãŸè¾ºã‚Š(p.72ã€œ74)ã¯ã€<a href="https://ja.wikipedia.org/wiki/ãƒã‚¸ãƒ†ã‚£ãƒ–å¿ƒç†å­¦">ãƒã‚¸ãƒ†ã‚£ãƒ–å¿ƒç†å­¦</a>ã®æˆæœãªã‚“ã§ã™ã­ã€‚</p>
<p>ãªã‚‹ã»ã©ã€è¦ã™ã‚‹ã«ã€
ã“ã†ã„ã£ãŸå¿ƒç†å­¦(ã‚„çµŒå–¶å­¦?)ã®æˆæœã‚’ã€
ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã§ã¯ãªãwearable sensorã«ã‚ˆã‚‹è¡Œå‹•å±¥æ­´ã‹ã‚‰å®Ÿè¨¼ã—ãŸã€
æ›´ã«æŠ¼ã—é€²ã‚ã¦ã€äººé–“è¡Œå‹•ã‚‚massã®è¦–ç‚¹ã‹ã‚‰è¦‹ã‚‹ã¨ä¸€èˆ¬ã®ç‰©ç†æ³•å‰‡ã«å¾“ã†ã€
ã¨ä¸»å¼µã—ã¦ã„ã‚‹ã‚‚ã®ãªã‚“ã§ã™ã‹ã­ã€‚
ã‚ã€ã„ã‚„ã€ã‚³ãƒ¼ãƒ«ã‚»ãƒ³ã‚¿ã‚„ãƒ›ãƒ¼ãƒ ã‚»ãƒ³ã‚¿ã®è©±ãªã©ã¯ã€
å…ã«è§’ã‚„ã£ã¦ã¿ãŸã‚‰ã‚ã‹ã£ãŸã€ã¨ã„ã†è©±ã§ã™ã‹ã€‚
ã ã‹ã‚‰ã€Œä»®èª¬ã‚’ç«‹ã¦ã‚‹ã“ã¨ã‚‚å­¦ç¿’ã§ãã‚‹ãƒã‚·ãƒ³ã«ä»»ã›ãŸæ–¹ãŒã„ã„ã€
([<a href="https://cakes.mu/posts/7372">ã©ã£ã¡ãŒæœ€å¼·ï¼ï¼Ÿ ç‰©ç†å­¦VSçµ±è¨ˆå­¦â€”â€”çŸ¢é‡å’Œç”·Ã—è¥¿å†…å•“ å¯¾è«‡ ãƒ‡ãƒ¼ã‚¿åˆ†æã§ã€Œéå¤±ã€ã¨ã„ã†æ¦‚å¿µãŒé€²åŒ–ã‚’é‚ã’ã¦ã—ã¾ã†ï¼Ÿ</a>])ã®ã§ã™ã­ã€‚
(ä½†ã—Goalã¯äººé–“ãŒè¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€ã¨)</p>
<p>ã¾ãã„ã„ã§ã™ã€‚
ã€Œå¹¸ã›ã€ã«ãªã‚‹ãŸã‚ã«ã€ã¼ãã‚‚3ã¤ã€æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
* è»¢è·ã—ã¦3é€±é–“ã€ç ”ä¿®ã¨ã¯è¨€ãˆsource codeãŒæ›¸ã‘ãŸã“ã¨(ã§ã‚‚ä»Šæ›´AngularJSã¨ã¯... æ˜”å–ã£ãŸæµæŸ„ã¨ã¯ã„ãˆ)
* ä¼šç¤¾ã®åˆè©£ãƒ»æ˜¼é£Ÿä¼šã§ãŠæ˜¼ã”é£¯ãŒã‚¿ãƒ€ã ã£ãŸã“ã¨(å®¶è¨ˆãŒåŠ©ã‹ã‚Šã¾ã™... ã§ã‚‚å‘¨å›²ã¨ã¯ã¾ã ã¾ã é¦´æŸ“ã‚ãš)
* é‡‘æ›œæ˜¼ã®ä¼šç¤¾ã®é£Ÿäº‹ä¼šã§ã‚¿ãƒ€é£¯ãŒé£Ÿã¹ã‚‰ã‚ŒãŸã“ã¨(å®¶è¨ˆãŒåŠ©ã‹ã‚Šã¾ã™... ã”é£¯ã®ã“ã¨ã°ã£ã‹ã‚Šã€‚ã§ã‚‚ãã‚Œã£ã¦å¤§äº‹ã§ã™ã‚ˆ)
ã‚ã‚Œ? ã‚ªãƒã¯ä»˜ã‘ã¡ã‚ƒã„ã‘ãªã„ã‚“ã§ã™ã‹ã­?</p>
<p>ã‚ã¨ã¯ã€Œmindfulnessã€ã€å¯ã‚‹å‰ã®ç‘æƒ³æ·±å‘¼å¸ã§ã—ã‚‡ã†ã‹ã€‚</p>
<p>ã‚ãã€å¹¸ã›ã€‚</p>
<p>...ãƒ›ãƒ³ãƒˆ?!</p>
<p>ä½•ã®å¿ƒé…ã‚‚ãªãå¯ã¦ã„ã‚Œã°ã€ãã‚Œã§å¹¸ã›ã€ãƒ‡ã‚¹ã€‚</p>
<p>ã£ã¦ã€æ­»ã‚“ã§ã‚‹ã®ã¨ç„¶ç¨‹å¤‰ã‚ã‚‰ãªã„ã®ã§ã¯ã€‚</p>
<p>...ã‚ãƒ¼ã€ã“ã‚Œã‚‚ã€<a href="https://lightworks-blog.com/happiness-formula">ã€”ãƒã‚¸ãƒ†ã‚£ãƒ–å¿ƒç†å­¦ã€•ã€Œæ„å›³çš„è¡Œå‹•ã€ã§ä»•äº‹ã®å¹¸ã›åº¦ã‚’ä¸Šã’ã‚‹æ–¹æ³•</a>ã«ã‚ˆã‚‹ã¨ã€
ãã‚Œãã‚Œã®ã€Œã‚ˆã„ã“ã¨ã€ã«ã¤ã„ã¦ã€ã€Œãªãœèµ·ããŸã®ã‹ã€ã€Œã©ã‚“ãªæ„å‘³ãŒã‚ã‚‹ã®ã‹ã€ã€Œè‡ªåˆ†/ä»–äººãŒã©ã‚“ãªåƒãã‹ã‘ã‚’ã—ãŸã‹ã‚‰ã‹ã€ã€Œã‚‚ã£ã¨å¾—ã‚‹ãŸã‚ã«ã¯ã©ã†ã—ãŸã‚‰ã‚ˆã„ã‹ã€ã‚’æ›¸ãåŠ ãˆã‚‹ãã†ã€‚
ã†ãƒ¼ã‚€ã€å¹¸ã›ã¸ã®é“ã¯ãã†å®¹æ˜“ãã¯ãªã„ã®ã§ã™ã­ã€‚
ãã†ã„ãˆã°éšæ‰€ã«æ›¸ã‹ã‚Œã¦ã¾ã™ã‹ã€‚
å¹¸ã›ã¨ã¯èƒ½å‹•çš„ãªã‚‚ã®ã§å—å‹•çš„ãªã‚‚ã®ã§ã¯ãªã„ã€ã¨ã€‚
Happinessã¨ã„ã†ã‚ˆã‚ŠWell-being?</p>
<h3>çŸ¢é‡ã•ã‚“ related links</h3>
<ul>
<li><a href="https://cakes.mu/posts/6945">äººé–“ã®è¡Œå‹•ã‚’æ”¯é…ã™ã‚‹éš ã‚ŒãŸæ³•å‰‡ã¨ã¯â€”â€”ã€ãƒ‡ãƒ¼ã‚¿ã®è¦‹ãˆã–ã‚‹æ‰‹ã€çŸ¢é‡å’Œç”·ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ ã€ å‰ç·¨ã€‘äººé–“ã‚’æ¸¬ã‚‹æ–°ã—ã„ã‚‚ã®ã•ã—ã®èª•ç”Ÿ</a></li>
<li><a href="https://cakes.mu/posts/6946">äººé–“ã®è¡Œå‹•ã‚’æ”¯é…ã™ã‚‹éš ã‚ŒãŸæ³•å‰‡ã¨ã¯â€”â€”ã€ãƒ‡ãƒ¼ã‚¿ã®è¦‹ãˆã–ã‚‹æ‰‹ã€çŸ¢é‡å’Œç”·ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ ã€ ä¸­ç·¨ã€‘äººé–“ã¯ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡ã‹ã‚‰é€ƒã‚Œã‚‰ã‚Œãªã„ï¼</a></li>
<li><a href="https://cakes.mu/posts/6947">äººé–“ã®è¡Œå‹•ã‚’æ”¯é…ã™ã‚‹éš ã‚ŒãŸæ³•å‰‡ã¨ã¯â€”â€”ã€ãƒ‡ãƒ¼ã‚¿ã®è¦‹ãˆã–ã‚‹æ‰‹ã€çŸ¢é‡å’Œç”·ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ ã€ å¾Œç·¨ã€‘ä½“ã‚’å‹•ã‹ã™ã¨å¹¸ç¦ã«ã€å¹¸ç¦ã«ãªã‚‹ã¨ç”Ÿç”£æ€§ãŒä¸ŠãŒã‚‹ã¨ã„ã†äº‹å®Ÿ</a></li>
<li><a href="https://cakes.mu/series/3235">ã©ã£ã¡ãŒæœ€å¼·ï¼ï¼Ÿ ç‰©ç†å­¦VSçµ±è¨ˆå­¦â€”â€”çŸ¢é‡å’Œç”·Ã—è¥¿å†…å•“ å¯¾è«‡</a></li>
<li><a href="https://cakes.mu/posts/7370">ã©ã£ã¡ãŒæœ€å¼·ï¼ï¼Ÿ ç‰©ç†å­¦VSçµ±è¨ˆå­¦â€”â€”çŸ¢é‡å’Œç”·Ã—è¥¿å†…å•“ å¯¾è«‡ ã€Œäººã®è¡Œå‹•ã‚’è‡ªç™ºçš„ã«å¤‰ãˆã‚‹ã“ã¨ã‚’å‘½ä»¤ã™ã‚‹ã€ã¨ã„ã†çŸ›ç›¾ã®ãã°ã§</a></li>
<li><a href="https://cakes.mu/posts/7371">ã©ã£ã¡ãŒæœ€å¼·ï¼ï¼Ÿ ç‰©ç†å­¦VSçµ±è¨ˆå­¦â€”â€”çŸ¢é‡å’Œç”·Ã—è¥¿å†…å•“ å¯¾è«‡ äººç”Ÿã¯ãŠé‡‘ã¨æ™‚é–“ã¨åˆ¶å¾¡è³‡æºã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã§ã‚ã‚‹</a></li>
<li><a href="https://cakes.mu/posts/7372">ã©ã£ã¡ãŒæœ€å¼·ï¼ï¼Ÿ ç‰©ç†å­¦VSçµ±è¨ˆå­¦â€”â€”çŸ¢é‡å’Œç”·Ã—è¥¿å†…å•“ å¯¾è«‡ ãƒ‡ãƒ¼ã‚¿åˆ†æã§ã€Œéå¤±ã€ã¨ã„ã†æ¦‚å¿µãŒé€²åŒ–ã‚’é‚ã’ã¦ã—ã¾ã†ï¼Ÿ</a></li>
<li><a href="https://cakes.mu/posts/7373">ã©ã£ã¡ãŒæœ€å¼·ï¼ï¼Ÿ ç‰©ç†å­¦VSçµ±è¨ˆå­¦â€”â€”çŸ¢é‡å’Œç”·Ã—è¥¿å†…å•“ å¯¾è«‡ ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚‚ãƒ‡ãƒ¼ã‚¿ã‚‚ã€æœ€çµ‚çš„ã«äººé–“ä¸­å¿ƒã§ã‚ã‚‹ã¹ãã§ã‚ã‚‹ã€‚</a></li>
<li><a href="http://www.soshisha.com/book_wadai/books/2068.html">ãƒ‡ãƒ¼ã‚¿ã®è¦‹ãˆã–ã‚‹æ‰‹--ã‚¦ã‚§ã‚¢ãƒ©ãƒ–ãƒ«ã‚»ãƒ³ã‚µãŒæ˜ã‹ã™äººé–“ãƒ»çµ„ç¹”ãƒ»ç¤¾ä¼šã®æ³•å‰‡ ã€ŒçŸ¥ã‚Šåˆã„ã®çŸ¥ã‚Šåˆã„ã€ãŒå¢—ãˆã‚‹ã¨ä»•äº‹ãŒã†ã¾ãã„ã!</a></li>
<li><a href="https://industry-co-creation.com/industry-trend/6539">äººå·¥çŸ¥èƒ½â€Hãã‚“â€ã¯ã‚‚ã®ã™ã”ãå°‘ãªã„ãƒ‡ãƒ¼ã‚¿ã§å­¦ç¿’ã—ã€æœ€é©è§£ã‚’å°ã(æ—¥ç«‹ çŸ¢é‡ï¼‰ã€K16-1A #6ã€‘</a></li>
<li><a href="https://industry-co-creation.com/industry-trend/6541">çµ„ç¹”ã®ãƒãƒ”ãƒã‚¹ã¯åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µãƒ¼ã§æ¸¬ã‚Œã‚‹(æ—¥ç«‹ çŸ¢é‡)ã€K16-1A #7ã€‘</a></li>
<li><a href="https://industry-co-creation.com/industry-trend/6543">äººå·¥çŸ¥èƒ½ãŒç”Ÿã‚€å‡ºã™æ–°ãŸãªè·æ¥­ã€ŒAIerã€ã¨ã¯ä½•ã‹ï¼Ÿã€K16-1A #8ã€‘</a></li>
<li><a href="http://www.hitachi.co.jp/products/it/it-pf/mag/pf/pr_ai_jump/">æ—¥ç«‹ã®äººå·¥çŸ¥èƒ½ã¨ã¯</a></li>
</ul>
<p>Hãã‚“ã€ä»Šã¯<a href="http://www.hitachi.co.jp/products/it/lumada/">Lumada</a>ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã­ã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[Nengajo Rhapsody]]></title><link href="http://u-ryo.github.io//blog/2019/01/07/nengajo-rhapsody/"/><updated>2019-01-15T00:49:28+09:00</updated><id>/blog/2019/01/07/nengajo-rhapsody/</id><content type="html"><![CDATA[<p>ã„ã¤ã‚‚å¹´è³€çŠ¶ã§è‹¦åŠ´ã—ã¦ã„ã¾ã™ã€‚
æ¯å¹´å¾®å¦™ã«å¤‰ã‚ã‚Šã¾ã™ã®ã§ã€‚
ä»Šå¹´è‹¦åŠ´ã—ãŸç‚¹ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚å¹´æœ«ã®è‡ªåˆ†ã®ãŸã‚ã«ã€‚</p>
<p><code>LuaLaTeX</code>ã«ãªã£ã¦ã‹ã‚‰ã€fontã®æ‰±ã„ã¯å¤§åˆ†æ¥½ã«ãªã‚Šã¾ã—ãŸã€‚
<a href="https://arxiv.hatenablog.com/entry/2016/11/30/183000">LuaLaTeXã®ãƒ•ã‚©ãƒ³ãƒˆã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦</a>ã‚’å‚è€ƒã«ã€
<code>*.ttf/otf</code>ã‚’<code>/usr/share/fonts/[true|open]type/xxx/</code>ä»¥ä¸‹ã«copyã—ã¦ã€
<code>.tex</code>fileã«
<code>\newfontfamily\Textä»»æ„å{è‹±æ–‡ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å}</code>ã‚„
<code>\newjfontfamily\Textä»»æ„å{å’Œæ–‡ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å}</code>ã¨æ›¸ã‘ã°ã€
<code>\Textä»»æ„å happy new year!</code>ã‚„<code>\Textä»»æ„å è¬¹è³€æ–°å¹´</code>ã¨ã„ã†ã‚ˆã†ã«ä½¿ãˆã¾ã—ãŸã€‚</p>
<p>class fileã¯é¦™ç”°æ¸©äººã•ã‚“ã®<code>ltjhagaki.cls</code>ã‚’é•·å¹´ä½¿ã‚ã›ã¦è²°ã£ã¦ã„ã¾ã™ã€‚
æ¢ã—ã¦ã¿ãŸã‚‰ä»Šã¯ã‚‚ã†è¦‹ä»˜ã‹ã‚‰ãªã„ã‚ˆã†ã§ã™ã­ã€‚</p>
<p>0.81ã‚„0.85ã§LuaLaTeXãŒå°‘ã—å¤‰ã‚ã£ã¦(<a href="https://zrbabbler.hatenablog.com/entry/20151013/1444700367">LuaTeX ã‚„ LaTeX ã‚„ LuaLaTeX ãŒæ–°ã—ããªã£ã¦ã‚¢ãƒ¬(1)</a>)ã€
<code>\pdfpagewidth</code>ã‚‚æœªå®šç¾©ã«ãªã£ã¡ã‚ƒã£ã¦ã¦ã€
ã¯ãŒãè‡ªä½“ã®è¡¨ç¤ºä½ç½®ã‚‚A4ã®upper centerã«ãªã£ã¡ã‚ƒã£ã¦ã¦ã€‚
å»å¹´ã¯ãƒã‚¬ã‚­ã‚µã‚¤ã‚ºã§PDFå‡ºã¦ãŸã®ã«ã€‚
ã“ã‚Œã ã¨å°åˆ·ã«ã©ã†ã«ã‚‚è‹¦åŠ´ã—ãŸã®ã§ã€
<a href="https://org-technology.com/posts/lualatex-geometry.html#">LuaLaTeX ã§ã®ä½™ç™½ã®è¨­å®š</a>ã‚’å‚è€ƒã«
geometryã‚’å°å…¥ã—ã¦ã¯ãŒãã‚µã‚¤ã‚ºã§pdfã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã—ãŸã‚‰
ã‚ˆã†ã‚„ã£ã¨ã†ã¾ãè¡Œãã¾ã—ãŸã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>\usepackage[paperwidth=100mm, paperheight=149mm]{geometry}
</span><span class='line'>\geometry{top=0truemm,bottom=0truemm,inner=0truemm,outer=0truemm}
</span></code></pre></td></tr></table></div></figure>
<p>ã“ã‚Œã§ã™ã­ã€‚è‰¯ã‹ã£ãŸã§ã™ã€‚</p>
<p><a href="http://www.easydrawingtutorials.com/index.php/disney/414-mickey-mouse-body">Easy Drawing Tutorials</a>ã€<a href="http://www.easydrawingtutorials.com/index.php/88-disney/81-draw-mickey-mouse">é¡”ã®æãæ–¹</a>ãªã‚“ã¦ã‚ã‚‹ã‚“ã§ã™ã­å‡„ã„ãªãã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[creating executable war on JHipster]]></title><link href="http://u-ryo.github.io//blog/2018/12/03/creating-executable-war-on-jhipster/"/><updated>2018-12-03T02:19:42+09:00</updated><id>/blog/2018/12/03/creating-executable-war-on-jhipster/</id><content type="html"><![CDATA[<p>ã„ã¤ã‚‚å¿˜ã‚Œã¡ã‚ƒã†ã‚“ã§ã€‚</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>$ gradle bootRepackage -Pprod
</span></code></pre></td></tr></table></div></figure>
<p><code>build.gradle</code>ã«ä¸­ã«å®šç¾©ãŒã‚ã‚Šã¾ã™ã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[mat-spinner in Angular Material]]></title><link href="http://u-ryo.github.io//blog/2018/12/02/mat-spinner-in-angular-material/"/><updated>2018-12-02T09:56:25+09:00</updated><id>/blog/2018/12/02/mat-spinner-in-angular-material/</id><content type="html"><![CDATA[<p>Angularã§ã€Œãƒ­ãƒ¼ãƒ‰ä¸­ã€ã‚’ç°¡å˜ã«å®Ÿç¾ã™ã‚‹æ–¹æ³•ã‚’æ¢ã—ã¦ã„ã¦ã€
<a href="https://material.angular.io/components/progress-spinner/overview">Angular Material</a>ã«ã‚ã‚‹ã‚“ã§ã™ã­ã€‚<code>&lt;mat-spinner&gt;&lt;/mat-spinner&gt;</code>ã ã‘ã€‚å‡„ãç°¡å˜ã€‚
ã§ã‚‚ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¦ã‚‚å‡ºã¦æ¥ãªã‹ã£ãŸã®ã§ä¸æ€è­°ã§ã—ãŸã€‚
ã„ã‚„ã€<a href="https://stackblitz.com/angular/qyqovrjarbx?file=app%2Fprogress-spinner-overview-example.html">sample</a>ã¨ã‹ã„ãã‚‰è¦‹ã¦ã‚‚ã€ç‰¹ã«ä½•ã‚‚<code>import</code>ã—ãªãã¦ã‚‚ã„ããªã‚Štagæ›¸ãã ã‘ã§ä½¿ãˆã‚‹ã‚ˆã€ã£ã¦ã„ã†ã‚“ã§ã™ã‘ã©ã€è‡ªåˆ†ã®ã«ã¯å‡ºã¦æ¥ã¾ã›ã‚“ã€‚ãªãœ??
<a href="https://www.youtube.com/watch?v=Z6JdFWXh1Nc">å‹•ç”»</a>è¦‹ã¦ã‚„ã£ã¨ã‚ã‹ã‚Šã¾ã—ãŸã€‚
ç¢ºã‹ã«å½“è©²component fileã§ã¯importã®å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã‘ã©ã€
<code>app.module.ts</code>ãªã‚Šã§<code>MatProgressSpinnerModule</code>ã®import/importsãŒå¿…è¦ãªã‚“ã§ã™ã­ã€‚
ã‚‚ã—å…¥ã£ã¦ãªã‘ã‚Œã°<code>BrowserAnimationsModule</code>ã‚‚ã€‚
sampleã¯defaultã§Matç³»Moduleå…¨éƒ¨å…¥ã‚Šã ã‹ã‚‰ã‚ˆãã‚ã‹ã‚“ãªã‹ã£ãŸã‚“ã§ã™ã‚ˆã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[Using where and join in mysqldump]]></title><link href="http://u-ryo.github.io//blog/2018/11/28/using-where-and-join-in-mysqldump/"/><updated>2018-11-28T00:37:50+09:00</updated><id>/blog/2018/11/28/using-where-and-join-in-mysqldump/</id><content type="html"><![CDATA[<p>åŸºæœ¬çš„ã«ã¯<a href="https://qiita.com/asigochan/items/fec45efff78045b33b90">mysqldumpã§whereã«joinã‚’ä½¿ã†</a>ã«ã‚ã‚‹é€šã‚Šã€</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>mysqldump -uusername -p DatabaseName tableA --single-transaction --were &#39;id IN (SELECT a.id FROM tableA a JOIN tableB b ON a.b_id=b.id WHERE b.name LIKE &quot;%someone%&quot;)&#39;
</span></code></pre></td></tr></table></div></figure>
<p>ã¨ã„ã†ã‚ã‘ã§ã™ãŒã€è‚ã¯ã€</p>
<ul>
<li><code>--where</code>ä¸­ã§<code>JOIN</code>ã‚’ä½¿ã†ãŸã‚ã«subqueryã«ã™ã‚‹</li>
<li><code>--single-transaction</code>ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§<code>mysqldump: Couldn't execute 'SELECT... Table 'a' was not locked with LOCK TABLES (1100)</code>ã¨è¨€ã‚ã‚Œã‚‹ã®ã‚’é˜²ã</li>
</ul>
]]></content></entry><entry><title type="html"><![CDATA[Suddenly failed to parse DateTime on JHipster Angular]]></title><link href="http://u-ryo.github.io//blog/2018/11/25/suddenly-failed-to-parse-datetime-on-jhipster-angular/"/><updated>2018-11-25T01:23:33+09:00</updated><id>/blog/2018/11/25/suddenly-failed-to-parse-datetime-on-jhipster-angular/</id><content type="html"><![CDATA[<p>ã‚ã‚‹æ™‚ã€JHipsterã®Angularã®User Managementã‚’ä¹…ã—æŒ¯ã‚Šã«è¦‹ã¦ã¿ã‚‹ã¨ã€useråãªã©è¡¨ç¤ºã•ã‚Œã‚‹ã®ãŒç‰©å‡„ãé…ã„ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚ãƒãƒ„ã€ã¾ãŸæ•°ç§’ã—ã¦ãƒãƒ„ã€ã¨ã„ã†å…·åˆã«ä¸€ã¤ä¸€ã¤ã®è¡ŒãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãã¾ã™ã€‚ã‚ã‚Œã‡? ã“ã‚“ãªã‚‚ã‚“ã ã£ãŸã‹ãªã? ã‚ã¾ã‚Šæ°—ã«ã—ãªã‹ã£ãŸã®ã§ã™ãŒã€æµçŸ³ã«æ–°è¦Userã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ã¦å¤±æ•—ã™ã‚‹æ®µã«ãªã£ã¦ã€ã“ã‚Œã¯ä½•ã¨ã‹ã—ãªã‘ã‚Œã°ã¨æ€ã„å§‹ã‚ã¾ã—ãŸã€‚browserã§F12ã‚’æŠ¼ã—ã¦ã¿ã‚‹ã¨ã€ã©ã†ã‚„ã‚‰Date Pipeã§ã®parseã«å¤±æ•—ã—ã¦ã„ã‚‹æ§˜å­ã€‚ã©ã†ã—ã¦? å‰ã¯å‡ºæ¥ã¦ãŸã®ã«ã€‚serverã‹ã‚‰æ¥ã¦ã„ã‚‹JSONã‚’ã‚ˆãè¦‹ã‚‹ã¨ã€DBã‹ã‚‰ã®DateTimeéƒ¨åˆ†ã®ObjectãŒ<code>epochSecond</code>ã¨ã‹nanoä½•ã¨ã‹ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚æ¤œç´¢ã™ã‚‹ã¨ã€
<a href="https://stackoverflow.com/questions/37999762/efficient-way-to-have-jackson-serialize-java-8-instant-as-epoch-milliseconds/38004044">Efficient way to have Jackson serialize Java 8 Instant as epoch milliseconds?</a>ã‚’è¦‹ä»˜ã‘ã¦ã€ä¸­èº«èª­ã‚“ã§ãªã„ã§ã™ãŒã€Œjackson-datatype-jsr310ã€ã‚’è¦‹æ›ã‘ã¦ã‚ããƒ¼!ã£ã¨ã€‚</p>
<p>jhipsterã§æ–°è¦applicationä½œã£ã¦ãã®<code>build.gradle</code>è¦‹ã¦ã¿ã‚‹ã¨ã€ç¢ºã‹ã«ã‚ã‚Šã¾ã—ãŸ<code>compile 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'</code>ã€‚
ã“ã‚Œã‚’ã€ãªãã¦ã‚‚ã„ã„ã˜ã‚ƒã‚“ã€ã¨å¤§åˆ†å‰ã«å–ã£ã¡ã‚ƒã£ã¦ãŸã‚“ã§ã™ã­ã€‚ç¢ºã‹ã«Webã‚¢ãƒ—ãƒªæœ¬ä½“ã«ã¯å½±éŸ¿ãªã‹ã£ãŸã®ã§æ°—ä»˜ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚ãƒ¼ã‚ã€‚ã“ã†ã„ã†å½±éŸ¿ãŒå‡ºã¦ãã‚‹ã§ã™ã‹ã€‚ãªã‚‹ã»ã©ã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[Setting password for unreachable mail user on JHipster]]></title><link href="http://u-ryo.github.io//blog/2018/11/24/setting-password-for-unreachable-mail-user-on-jhipster/"/><updated>2018-11-28T04:32:45+09:00</updated><id>/blog/2018/11/24/setting-password-for-unreachable-mail-user-on-jhipster/</id><content type="html"><![CDATA[<p>JHipsterã§userã‚’ä½œã‚‹æ™‚ã«mail addressã¯å¿…é ˆã§ã€
åŸºæœ¬çš„ã«ã¯new userä½œã‚‹ã¨JHipsterã¯è£ã§mailã‚’æŠ•ã’ã¦ã„ã¾ã™ã€‚
æŠ•ã’ã¦å¤±æ•—ã—ã¦ã‚‚new userã¯ä½œã‚Œã‚‹ã‚“ã§ã™ãŒã€passwordã‚’è¨­å®šã§ãã¾ã›ã‚“ã€‚
ã©ã†ã—ãŸã‚‰ã„ã„ã‚“ã ã‚ã†? ã¨æ€ã£ã¦logè¦‹ã¦ã„ãŸã‚‰ã€
<code>http(s)://ãƒ›ã‚¹ãƒˆå/#/reset/finish?key=XXXXXXXXXXXXXXX</code>ã«accessã™ã‚Œã°é€šå¸¸ã®æ‰‹ç¶šãã«ä¹—ã‚Œã‚‹ã‚“ã§ã™ã­ã€‚
ã“ã®keyã¯ã©ã“ã§è¦å®šã•ã‚Œã‚‹ã®ã‹ã¨æ€ã£ãŸã‚‰ã€<code>JHI_USER.RESET_KEY</code>ã®å€¤ã§ã™ã€‚
ã“ã“ã ã‘ã§ã¯ãƒ€ãƒ¡ã§ã€<code>JHI_USER.RESET_DATE</code>ã«<code>now()</code>ç­‰ã§æ—¥ä»˜æ™‚åˆ»ã‚’setã—ãªã„ã¨ã€ãã—ã¦ãã®æ™‚åˆ»ã‹ã‚‰24æ™‚é–“ä»¥å†…ã«accessã—ãªã„ã¨ã€ãªã‚‰ãªã„ã§ã™ã€‚
ã‚ã‚‹userã®passwordå¼·åˆ¶resetã«ã‚‚ä½¿ãˆã‚‹ã€ã¨æ€ã„ã¾ã™ã€‚</p>
<p>ãŸã ã“ã‚Œã‚’ã‚„ã‚‹ã¨ã€<code>UserService#completePasswordReset</code>ã®ä¸­ã®<code>cacheManager.getCache</code>ã§ãƒŒãƒ«ãƒãŒå‡ºã‚‹ã‚ˆã†ã§ã©ã†ã—ã‚ˆã†ã‚‚ãªã‹ã£ãŸã§ã™ã€‚ãªã®ã§ã€<code>UserService.java</code>ä¸­ã®<code>cacheManager.getCache(...)</code>ã‚’(å½“è©²methodä»¥å¤–ã§ã‚‚)å…¨ã¦<code>try...catch</code>ã§å›²ã„ã¾ã—ãŸã€‚ã ã£ã¦ç„¡å®³ã§ã—ã‚‡ã†?</p>
<p>è¿½è¨˜: JHipsterã§ã®login dialogã«ã¯ã€Œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚Œã¾ã—ãŸã‹ã€ã¨ã„ã†linkãŒã‚ã£ã¦ã€
ãã‚Œã‚’è¸ã‚€ã¨<code>http://127.0.0.1:8080/#/reset/request</code>ã¨ã„ã†pageã«é·ç§»ã—ã€
mail addressã‚’å…¥ã‚Œã‚‹ã¨ã€ä¸Šè¨˜åˆæœŸç™»éŒ²æ™‚åŒæ§˜ã«Activateã‚’è¦æ±‚ã™ã‚‹mailãŒé£›ã³ã¾ã™ã€‚
åˆã‚ã¦ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚ã¸ã‡ã‚ˆãå‡ºæ¥ã¦ã¾ã™ã­ã€‚
ãã®mailã«æ›¸ã„ã¦ã‚ã‚‹URLã‚‚åˆæœŸç™»éŒ²æ™‚åŒæ§˜<code>http://127.0.0.1:8080/#/reset/finish?key=XXXXXXXXXX</code>ã§ã™ã€‚</p>
]]></content></entry><entry><title type="html"><![CDATA[Adding a new column on JHipster]]></title><link href="http://u-ryo.github.io//blog/2018/11/24/adding-a-new-column-on-jhipster/"/><updated>2018-11-24T05:56:26+09:00</updated><id>/blog/2018/11/24/adding-a-new-column-on-jhipster/</id><content type="html"><![CDATA[<p>JHipsterã§databaseã®tableã«æ–°ã—ã„columnã‚’è¶³ã—ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚
Liquibaseã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ç›´æ¥DBã‚’å¤‰ãˆã¡ã‚ƒã†ã¨ç«‹ã¡ä¸ŠãŒã‚‰ãªããªã£ã¡ã‚ƒã„ã¾ã™ã€‚
çµæ§‹é¢å€’è‡­ã„ã‚“ã§ã™ã‚ˆã­Liquibaseã€‚</p>
<p>åŸºæœ¬çš„ã«ã¯<a href="https://www.jhipster.tech/development/#database-updates">Using JHipster in developmentã®Database updates</a>ã«æ›¸ã„ã¦ã‚ã‚‹é€šã‚Šã€ã§ã™ã€‚
3é€šã‚Šç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€æœ€åˆã«æ›¸ã‹ã‚Œã¦ã„ã‚‹<code>entity sub-generator</code>ã‚’ä½¿ã£ãŸæ–¹ãŒã€testã‚„i18nã€angularå´ã®é¢å€’ã‚‚è¦‹ã¦ãã‚Œã‚‹ã®ã§æ¥½ã§ã™ã€‚
ä½†ã—ã€generateã•ã‚Œã‚‹java/json/ts filesã«ã¤ã„ã¦ã¯ã€é¢å€’ã§ã‚‚ä¸€ã¤ä¸€ã¤diffã‚’è¦‹ã¦ä¸Šæ›¸ãã™ã‚‹ã‹è€ƒãˆãŸæ–¹ãŒã„ã„ã§ã™ã€‚å ´åˆã«ã‚ˆã£ã¦ã¯ä¸Šæ›¸ãã—ãªã„æ–¹ãŒã„ã„caseã‚‚ã‚ã‚Šã¾ã—ãŸ(repository classã€å³ã¡DBã‚’ç›´æ¥å©ãclassã¨ã‹resource classã€å³ã¡Rest Controllerã¨ã‹ã€i18nã®global.jsonã¨ã‹ã€ç‹¬è‡ªã«æ›¸ã„ãŸã¨ã“ã‚ãŒã‚ã‚‹ã‚‚ã®ã¯ç‰¹ã«)ã€‚</p>
<p>æ–°è¦ã«tableã”ã¨åŠ ãˆã‚‹æ™‚ã¯ã“ã‚Œã§ã„ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“(ä»¥å‰ã‚„ã£ã¦ã†ã¾ãè¡Œã£ãŸè–„ã„è¨˜æ†¶ãŒã‚ã‚Šã¾ã™ãŒã‚ˆãè¦šãˆã¦ã¾ã›ã‚“)ã€‚
ã‘ã‚Œã©ã‚‚ã€æ—¢å­˜tableã«columnã‚’è¶³ã™ã€ã¨ãªã‚‹ã¨ã€
<code>å¹´æœˆæ—¥_changelog.xml</code>ã‚’ä½œã£ã¦ãã‚Œãªã„ã®ã§ã€
ã„ãã‚‰<code>gradle</code>ã‹ã‘ã¦ã‚‚DBã®tableã‚’å¤‰æ›´ã—ã¦ãã‚Œãªã„ã‚“ã§ã™ã€‚
æ›´ã«ã€checksumãŒåˆã‚ãªã„ã¨ã„ã£ã¦èµ·å‹•ã—ãªããªã‚Šã¾ã™ã€‚
å›°ã‚Šã¾ã™ã€‚</p>
<p>ãªã®ã§ã€2ç•ªç›®ã®ç­–ã‚’åˆã‚ã›ã¦<code>changelog.xml</code>ã‚’ä½œã£ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚
ãã®ãŸã‚ã«ã¯ä¸Šè¨˜ãƒšãƒ¼ã‚¸ã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«ã€<strong>ä¸€æ—¦buildã—ã¦ã‹ã‚‰</strong>ã€
<code>gradle liquibaseDiffChangelog -PrunList=diffLog</code>ã™ã‚‹ã¨ã€
class fileã®diffã‚’å–ã£ã¦<code>src/main/resources/config/liquibase/changelog/</code>ä»¥ä¸‹ã«changelogã‚’ä½œã£ã¦ãã‚Œã¾ã™ã€‚
ãã‚Œã‚’<code>src/main/resources/config/liquibase/master.xml</code>ã«æ‰‹ã§æ›¸ãå…¥ã‚Œã¦ã‹ã‚‰buildã™ã‚‹ã¨ã€changelogãŒåƒã„ã¦<code>alter table</code>ã—ã¦ãã‚Œã¾ã™ã€‚
ä½†ã—ãã®éš›ã€å…ƒã®tableã®xml(<code>å¹´æœˆæ—¥_added_entity_ãƒ†ãƒ¼ãƒ–ãƒ«å.xml</code>)ã‚’ã‚‚ã¨ã«æˆ»ã—ã¦ãŠã‹ãªã„ã¨ã€ã€ŒchecksumãŒåˆã‚ãªã„ã€ã¨è¨€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p>
<p>...ã¨ã„ã†ã‚ˆã†ã«ã€1ç•ªç›®ã¨2ç•ªç›®ã®åˆã‚ã›æŠ€çš„ãªã¨ã“ã‚ãŒæœ€è‰¯ã®ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚</p>
<p>ã©ã†ã—ã¦ã‚‚ã†ã¾ãè¡Œã‹ãªã„æ™‚ã€æœ€å¾Œã¯ä»¥ä¸‹ã®æ‰‹ã§ä½•ã¨ã‹ãªã‚Šã¾ã™ã€‚ãªã‚Šã¾ã—ãŸã€‚</p>
<ul>
<li>DBã¯è‡ªåˆ†ã§<code>alter table</code></li>
<li>checksumã¯<code>DATABASECHANGELOG.MD5CHECKSUM</code>ã«ã‚ã‚‹ã®ã§è‡ªåˆ†ã§<code>update table set ...</code></li>
</ul>
]]></content></entry></feed>